!function(){$("#myImg").eraser({completeRatio:.1,completeFunction:function(){e.removeEventListener("mousedown",s),e.removeEventListener("mousemove",i),document.removeEventListener("mouseup",u),e.removeEventListener("touchstart",s,{passive:!1}),e.removeEventListener("touchmove",i),document.removeEventListener("touchend",u),document.removeEventListener("touchcancel",u),$(a).data("eraser").ctx.closePath(),o.fadeOut(),$("#completeInfo").show()}});const e=document.getElementById("wrap"),t=document.getElementById("myCanvas"),o=$("#myImg");console.log("$img",o.data("eraser"));const a=o.data("eraser").canvas,n=confetti.create(t,{resize:!0});let c=!0,r=!1;const s=e=>{c=!1,"touchstart"===e.type?function(e,t){var o=$(e).data("eraser");if(!o.touchDown){var a=t.changedTouches[0],n=a.pageX-o.posX,c=a.pageY-o.posY;n*=o.scaleRatio,c*=o.scaleRatio,o.enabled&&o.methods.evaluatePoint(o,n,c),o.touchDown=!0,o.touchID=a.identifier,o.touchX=n,o.touchY=c,t.preventDefault()}}(a,e):function(e,t){var o=$(e).data("eraser"),a=t.pageX-o.posX,n=t.pageY-o.posY;a*=o.scaleRatio,n*=o.scaleRatio,o.touchDown=!0,o.touchX=a,o.touchY=n,o.enabled&&(o.methods.evaluatePoint(o,a,n),o.isBeginPath||(o.ctx.beginPath(),o.isBeginPath=!0),o.ctx.moveTo(o.touchX-1,o.touchY),o.ctx.lineTo(o.touchX,o.touchY),o.ctx.stroke())}(a,e)},u=e=>{c=!0,"touchend"===e.type?function(e,t){var o=$(e).data("eraser");if(o.touchDown)for(var a=t.changedTouches,n=a.length;n--;)if(a[n].identifier==o.touchID){o.touchDown=!1,t.preventDefault();break}}(a,e):function(e){$(e).data("eraser").touchDown=!1}(a)},i=e=>{c||r||(r=!0,requestAnimationFrame(()=>{let o,c,s=!1;"touchmove"===e.type?(o=e.touches[0].clientX,c=e.touches[0].clientY,s=function(e,t){var o=$(e).data("eraser");if(o.touchDown)for(var a=t.changedTouches,n=a.length;n--;)if(a[n].identifier==o.touchID){var c=a[n].pageX-o.posX,r=a[n].pageY-o.posY;c*=o.scaleRatio,r*=o.scaleRatio,o.enabled&&(o.methods.evaluatePoint(o,c,r),o.ctx.beginPath(),o.ctx.moveTo(o.touchX,o.touchY),o.ctx.lineTo(c,r),o.ctx.stroke()),o.touchX=c,o.touchY=r,t.preventDefault();break}}(a,e)):(o=e.x,c=e.y,s=function(e,t){var o=$(e).data("eraser"),a=t.pageX-o.posX,n=t.pageY-o.posY;a*=o.scaleRatio,n*=o.scaleRatio;var c=o.ctx,r=c.isPointInStroke(a,n);return o.enabled&&(o.methods.evaluatePoint(o,a,n),c.moveTo(o.touchX,o.touchY),c.lineTo(a,n),c.stroke()),o.touchX=a,o.touchY=n,r}(a,e)),s?r=!1:(n({particleCount:2,spread:20,angle:270,origin:{x:o/t.width,y:c/t.height},startVelocity:5,gravity:1,colors:["#fff","#666"]}),r=!1)}))};e.addEventListener("mousedown",s),e.addEventListener("mousemove",i),document.addEventListener("mouseup",u),e.addEventListener("touchstart",s,{passive:!1}),e.addEventListener("touchmove",i),document.addEventListener("touchend",u),document.addEventListener("touchcancel",u)}();