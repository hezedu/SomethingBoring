import{_ as e,u as a,bu as l,f as s,h as t,j as i,bx as r,c1 as u,o,c as n,b as c,C as v,m as d,a as p,n as m,F as h,B as b,P as g,T as y,G as f,l as _,by as C,w,x,t as S,q as T,ac as k,z as D,E as L,bt as P,bw as R,S as E,s as I,J as A,K as j}from"./index-CioBjTVG.js";/* empty css              *//* empty css              *//* empty css              */import{_ as N}from"./headItem-Cz9qCjk4.js";import{_ as B,s as U,a as V}from"./index-CuHvB06O.js";import{T as K,_ as O,a as M}from"./index-Cf_Hh-m5.js";import{_ as F}from"./up_down_num-Bp3VgaJY.js";import{A as W}from"./index-DdCt_D9c.js";import{E as H}from"./emptyPage-Ds2BKBqQ.js";import{i as $}from"./index-B4fsadIy.js";import{T as z,a as G}from"./index-Onjf-qgk.js";import"./index-C9iF-GfQ.js";import"./use-id-CcbAo3SX.js";import"./index-DXNav8J_.js";import"./use-tab-status-_iNRjcO8.js";import"./index-DcdjDLdy.js";import"./index-Bde3MoM6.js";const q={class:"tabsTop"},Q={class:"cols col1"},J={class:"cols"},X={class:"cols"},Y={key:0,class:"numWrap"},Z=e({__name:"dealList",props:["currPair"],setup(e){const b=e,{t:g}=a(),y=l(),f=s(0),_=s(!1),C=()=>{_.value=!0},w=t((()=>b.currPair)),x=t((()=>w.value?w.value.depths[f.value]:{})),S=t((()=>w.value?x.value.value:1)),T=s(0),k=s(0),D=s(0),L=t((()=>{const e=y.discBuyList;if(!e)return[];let a=T.value,l=2==a?12:0==a?28:0;l=l>e.length?e.length:l;let s=0,t=0;const i=[];for(;s<l;s++){let a=e[s];t+=1*a.amount,a.total=t,i.push(a)}return D.value=t,i})),P=t((()=>{const e=y.discSellList;if(!e)return[];let a=T.value,l=1==a?12:0==a?28:0;l=l>e.length?e.length:l;let s=0,t=0;const i=[];for(;s<l;s++){let a=e[s];t+=1*a.amount,a.total=t,i.push(a)}return k.value=t,i}));return i((()=>{r.clearCurrAndSubscribeDisc(w.value.symbol,S.value)})),u(((e,a,l)=>{f.value=0,r.clearCurrAndSubscribeDisc(w.value.symbol,S.value),l()})),(e,a)=>{const l=B,s=W;return o(),n(h,null,[c("div",q,[c("div",Q,v(d(g)("买")),1),c("div",J,v(d(g)("卖")),1),c("div",X,[c("div",{class:"select",onClick:C},v(x.value.label),1)])]),w.value?(o(),n("div",Y,[p(l,{defaulRowNum:1==T.value?0:28,list:L.value,maxTotal:D.value,maxCountDecimalDigit:w.value.maxCountDecimalDigit,priceLength:x.value.len,revert:"true"},null,8,["defaulRowNum","list","maxTotal","maxCountDecimalDigit","priceLength"]),p(l,{defaulRowNum:2==T.value?0:28,isRedBg:1,isRedFont:1,list:P.value,maxTotal:k.value,revertBack:"true",maxCountDecimalDigit:w.value.maxCountDecimalDigit,priceLength:x.value.len},null,8,["defaulRowNum","list","maxTotal","maxCountDecimalDigit","priceLength"])])):m("",!0),p(s,{show:_.value,"onUpdate:show":a[0]||(a[0]=e=>_.value=e),actions:w.value.depths,"cancel-text":d(g)("取消"),"close-on-click-action":"",onSelect:a[1]||(a[1]=(e,a)=>{f.value=a,r.clearCurrAndSubscribeDisc(w.value.symbol,S.value)})},null,8,["show","actions","cancel-text"])],64)}}},[["__scopeId","data-v-07257252"]]),ee={key:0,class:"list"},ae={class:"th"},le={class:"leftCol"},se={class:"midCol"},te={class:"rightCol"},ie={class:"leftCol"},re={class:"rightCol"},ue=e({__name:"newList",props:["currPair"],setup(e){const s=e,i=t((()=>s.currPair)),r=t((()=>p.tradeNewestList)),{t:u}=a(),p=l();return(e,a)=>r.value.length>0?(o(),n("ul",ee,[c("li",ae,[c("div",le,v(d(u)("时间")),1),c("div",se,v(d(u)("价格")),1),c("div",te,v(d(u)("数量")),1)]),(o(!0),n(h,null,b(r.value,((e,a)=>(o(),n("li",{key:a},[c("div",ie,v(d(g)(e.dealTimestamp,"HH:mm:ss")),1),c("div",{class:f("midCol "+("B"===e.dealSide?"greenF":"redF"))},v(d(y)(e.dealPrice,i.value.maxPriceDecimalDigit)),3),c("div",re,v(d(y)(e.dealAmount,i.value.maxCountDecimalDigit)),1)])))),128))])):(o(),_(H,{key:1}))}},[["__scopeId","data-v-ac7a3bbd"]]),oe={__name:"depthChart",props:["currPair"],setup(e){const a=e,r=l(),u=s(null),c=s(null),v=t((()=>r.discBuyList)),d=t((()=>r.discSellList)),p=e=>{var l={animation:!1,tooltip:{trigger:"none",axisPointer:{type:"cross",show:!1,crossStyle:{width:.5},label:{formatter:e=>"x"===e.axisDimension?m(e.value):"y"===e.axisDimension?function(e){if(!e)return e;return y(e,a.currPair.maxCountDecimalDigit)}(e.value):e.value}}},grid:{show:!1,borderColor:"#fff",backgroundColor:"var(--Misc-body-bg)",borderWidth:.5,left:0,top:0,right:0,bottom:5},xAxis:{type:"category",axisLine:{show:!1},axisLabel:{color:"#7080a3",showMaxLabel:!1,showMinLabel:!1,formatter:m},splitLine:{lineStyle:{color:["rgba(153,153,153,0.07)"]}}},yAxis:{show:!1,axisLine:{show:!1},axisTick:{lineStyle:{color:"#7080a3"}},axisLabel:{color:"#7080a3"},splitLine:{lineStyle:{color:["rgba(153,153,153,0.07)"]}}},series:[{type:"line",symbol:"none",itemStyle:{normal:{color:"#5bd288"}},lineStyle:{normal:{color:"#5bd288",width:0}},areaStyle:{normal:{color:"var(--basic---)"}},data:[]},{type:"line",symbol:"none",lineStyle:{normal:{color:"#f97564",width:0}},itemStyle:{normal:{color:"#f97564"}},areaStyle:{normal:{color:"var(--van-danger-color)"}},data:[]}]};e.setOption(l),c.value=e,window.onresize=function(){e.resize()}};function m(e){return 0===e.indexOf("-")?"":e}return i((()=>{p($(u.value))})),C((()=>{c.value&&c.value.dispose()})),w((()=>v.value),(()=>{(()=>{if(!c.value)return;const e=v.value,a=d.value;let l=[],s=[],t=0,i=[];const r=a.length-e.length;if(e.forEach((e=>{t+=Number(e.amount),i.unshift(e.price),l.unshift([e.price,t])})),r>0){let e,a=0;for(;a<r;a++)e="-"+a,i.unshift(e),l.unshift([e,t])}if(t=0,a.forEach((e=>{t+=Number(e.amount),s.push([e.price,t]),i.push(e.price)})),r<0){let e,a=0;for(;a>r;a--)e="-"+a,s.push([e,t]),i.push(e)}c.value.setOption({xAxis:{data:i},series:[{data:l},{data:s}]})})()})),(e,a)=>(o(),n("div",{ref_key:"echarRef",ref:u,style:{width:"100%",height:"100%"}},null,512))}},ne={class:"topRow"},ce={class:"tabs"},ve=["onClick"],de={class:"inner"},pe={class:"rightCol"},me=["onClick"],he={class:"chart"},be=e({__name:"chart",props:["currPair"],setup(e){const{t:l}=a(),t=s(1),i=s(1),u=[l("分时"),l("15m"),l("1h"),l("4h"),l("1d")],p=s(-1),g=s(l("更多")),y=[l("1m"),l("3m"),l("5m"),l("30m"),l("2h"),l("6h"),l("12h"),l("1w")],C=s(!1),w=()=>{C.value=!C.value},x=e,S=()=>{r.unsubscribeCurrTradeRealLine()},T=(e,a)=>{r.clearCurrAndSubscribeTradeRealLine(e,a)},k=(e,a)=>{console.log("getTradeLineAllData"),r.getTradeLineAllData(e,a)},D=s(0),L=()=>{i.value=-1,D.value=1};return(e,a)=>(o(),n(h,null,[c("div",ne,[c("ul",ce,[(o(),n(h,null,b(u,((e,a)=>c("li",{key:a,onClick:e=>{return l=a,t.value=l,i.value=l,void(D.value=0);var l},class:f(""+(i.value==a?"active":""))},[c("div",de,v(e),1)],10,ve))),64))]),c("div",pe,[c("div",null,[c("p",{class:f("seeMore "+(C.value?"active":"")),onClick:w},[c("span",{class:f(""+("更多"!=g.value?"w":""))},v(g.value),3),c("span",{class:f("arrow "+("更多"!=g.value?"w":""))},null,2)],2)]),c("div",{class:"active",onClick:L},v(d(l)("深度图")),1)])]),c("ul",{class:f("tabs2 "+(C.value?"active":""))},[(o(),n(h,null,b(y,((e,a)=>c("li",{key:a,onClick:e=>{return l=a,i.value=-1,p.value=l,t.value=5+l,C.value=!1,void(g.value=y[l]);var l},class:f(""+(p.value==a?"active":""))},v(e),11,me))),64))],2),c("div",he,[0==D.value?(o(),_(K,{key:0,containerId:"trading_view_spot",currPair:x.currPair,lineType:t.value,getTradeLineAllData:k,unsubscribeCurrTradeRealLine:S,clearCurrAndSubscribeTradeRealLine:T,onShowDepth:L},null,8,["currPair","lineType"])):m("",!0),1==D.value?(o(),_(oe,{key:1,currPair:x.currPair},null,8,["currPair"])):m("",!0)])],64))}},[["__scopeId","data-v-4df33372"]]);var ge={VITE_OPENAPI:"https://app.fitget.pro",VITE_VERSION:"v1",VITE_FALLBACK_LANG:"zh",VITE_SIGNATURE_KEY:"4b424e19fd7287dc2378271f985bd0b8",VITE_WEBSOCKET_MQTT_URL:"wss://dapp.fitget.pro/mqtt",VITE_MERCHANT_ID:"1",VITE_FUSION_PROD_ID:"5",BASE_URL:"/SomethingBoring/tmp/fitget",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ye=e=>(A("data-v-4c0447b3"),e=e(),j(),e),fe=ye((()=>c("img",{class:"transIcon",src:V},null,-1))),_e=[ye((()=>c("img",{src:O},null,-1)))],Ce=[ye((()=>c("img",{src:M},null,-1)))],we={key:1,class:"mainWrap"},xe={class:"topBlock"},Se={class:"leftCol"},Te={class:"row2"},ke={class:"topList"},De={class:"greyS"},Le={class:"whiteRow"},Pe={class:"greyS"},Re={class:"whiteRow"},Ee={class:"greyS"},Ie={class:"whiteRow"},Ae={class:"greyS"},je={class:"whiteRow"},Ne={class:"chartWrap"},Be={key:2,class:"btnWrap"},Ue=e({__name:"detail",setup(e){const b=ge,{VITE_WEBSOCKET_MQTT_URL:g,VITE_MERCHANT_ID:y}=b,w=[`exchange.public.${y}.spot.ticker`],A=x(),j=S(),{t:B}=a(),V=l(),K=T(),O=s(A.params.symbol);s(0);const M=s(!1),W=s("tab1"),H=()=>{M.value=!0},$=()=>{M.value=!1},q=async()=>{K.isLogin()?(await E.addSelfTradePair(O.value),I(B("加入自选"))):K.connect()},Q=async()=>{await E.removeSelfTradePair(O.value),I(B("移出自选"))};i((()=>{r.subscribes(w),r.clearAndStartSpotNewest(O.value)})),C((()=>{r.unsubscribes(w),r.clearCurrSpotNewest(),r.unSubscribeCurrDisc()}));const J=t((()=>{const e=O.value.toUpperCase();return V.spotPairMap[e]})),X=t((()=>{const e=Object.create(null);return K.selfSpotTradePairs.forEach((a=>{e[a.symbol]=!0})),e}));return u(((e,a,l)=>{O.value=e.params.symbol,r.clearAndStartSpotNewest(O.value),l(),console.log("beforeRouteUpdate")})),(e,a)=>{const l=N,s=k("CoinToLegal"),t=G,i=z;return o(),n(h,null,[J.value?(o(),_(l,{key:0,class:"head-item",headTt:`${J.value.leftKey}/${J.value.rightKey}`,titleFunction:H},{icon:D((()=>[fe])),default:D((()=>[d(K).isLogin()&&X.value[J.value.symbol]?(o(),n("div",{key:0,class:"headStar",onClick:Q},_e)):(o(),n("div",{key:1,class:"headStar",onClick:q},Ce))])),_:1},8,["headTt"])):m("",!0),J.value?(o(),n("div",we,[c("div",xe,[c("div",Se,[p(F,{class:"bigF",pairKey:J.value.key,value:J.value.ticker.last},null,8,["pairKey","value"]),c("p",Te,[L(" ≈"),p(s,{class:"white",value:J.value.ticker.last,coin:J.value.rightKey},null,8,["value","coin"]),c("span",{class:f(J.value.ticker.changeRange>0?"green":"red")},v(d(P)(J.value.ticker.changeRange)),3)])]),c("ul",ke,[c("li",null,[c("p",De,v(d(B)("24h最高价")),1),c("p",Le,v(J.value.ticker.high),1)]),c("li",null,[c("p",Pe,v(d(B)("24h成交量"))+" ("+v(J.value.leftKey.toUpperCase())+") ",1),c("p",Re,v(d(R)(J.value.ticker.volume)),1)]),c("li",null,[c("p",Ee,v(d(B)("24h最低价")),1),c("p",Ie,v(J.value.ticker.low),1)]),c("li",null,[c("p",Ae,v(d(B)("24h成交额"))+" ("+v(J.value.rightKey.toUpperCase())+") ",1),c("p",je,v(d(R)(J.value.ticker.rightVolume)),1)])])]),c("div",Ne,[p(be,{currPair:J.value},null,8,["currPair"])]),p(i,{active:W.value,"onUpdate:active":a[0]||(a[0]=e=>W.value=e)},{default:D((()=>[p(t,{title:d(B)("委托订单"),key:"tab1"},{default:D((()=>[p(Z,{currPair:J.value},null,8,["currPair"])])),_:1},8,["title"]),p(t,{title:d(B)("最新成交"),key:"tab2"},{default:D((()=>[p(ue,{currPair:J.value},null,8,["currPair"])])),_:1},8,["title"])])),_:1},8,["active"])])):m("",!0),J.value?(o(),n("div",Be,[c("p",{class:"btns greenBtn",onClick:a[1]||(a[1]=e=>d(j).push(`/spot/${J.value.symbol}`))},v(d(B)("买入")),1),c("p",{class:"btns redBtn",onClick:a[2]||(a[2]=e=>d(j).push(`/spot/${J.value.symbol}?entrustType=2`))},v(d(B)("卖出")),1)])):m("",!0),M.value?(o(),_(U,{key:3,tabNav:[d(B)("自选"),d(B)("USDT")],onClose:$},null,8,["tabNav"])):m("",!0)],64)}}},[["__scopeId","data-v-4c0447b3"]]);export{Ue as default};
