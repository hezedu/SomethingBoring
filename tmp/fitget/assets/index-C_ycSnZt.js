import{u as e}from"./useCountDown-BDOyrk-B.js";import{_ as o}from"./index-MP83Mxf-.js";import{M as s}from"./MsgService-B21ojECZ.js";import{u as t,r as a,f as i,s as l,w as r,o as n,c as m,a as d,p as u}from"./index-ZSwLI674.js";import"./index-Cxe8Vk9V.js";import"./index-CqDlCCNj.js";import"./use-id-BUjKeJ2W.js";/* empty css                                              */import"./index-D9ybKy9M.js";const p={class:"mobile-authority-wrapper"},c={__name:"index",props:{twiceParams:{type:Object,require:!0}},emits:["next"],setup(c,{emit:f}){const y=f,x=c.twiceParams,{t:b}=t(),w=a({}),g=i(!0),j=a({formModelValues:{},submitText:b("提交"),submitDisabled:g,onSubmit:e=>{console.log(e),v(e)},formConfigList:[{componentType:"sms",type:"text",key:"sms",label:`${b("将发送验证码到")}${x.show}`,labelAlign:"top",placeholder:b("请输入验证码"),isImmediate:!1,countDownData:e(),handlerCountdown:(e,o)=>{console.log("isMobile(email.value)",x.show),(async e=>{const o=await s.sendVerifyCode(x,x.ext);w[x.bizType]=o,console.log(w),e()})(e)},maxlength:6,rules:[{pattern:/^\d{6}$/,message:b("请输入6位数字验证码")}]}]}),v=async({sms:e})=>{const o=w[x.bizType];if(!o)return l(b("请先发送验证码")),!1;await s.checkVerifyCode({verifyCodeId:o,verifyCode:e,bizType:x.bizType}),y("next",{result:{verifyCodeId:o,verifyCode:e},fullAccount:x.fullAccount})};return r((()=>j.formModelValues),(e=>{console.log("newFormData",e),(e=>{g.value=!e.sms})(e)}),{immediate:!0,deep:!0}),(e,s)=>(n(),m("div",p,[d(o,u({modelValue:j.formModelValues,"onUpdate:modelValue":s[0]||(s[0]=e=>j.formModelValues=e)},j),null,16,["modelValue"])]))}};export{c as default};
