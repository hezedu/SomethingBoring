import{_ as a}from"./headItem-Cz9qCjk4.js";import{_ as l,f as s,j as t,o as e,l as i,z as n,b as o,C as c,E as r,c as u,B as v,G as A,m as p,bt as m,F as g,ao as d,T as C,af as h,J as k,K as I,x as f,t as b,u as R,R as y,h as L,a as B,n as w}from"./index-CioBjTVG.js";import{_ as S}from"./icon_navbar_close_nor@2x-cBiUEbVd.js";import{C as T}from"./ContractService-Ba4Wf1gW.js";const M=a=>(k("data-v-ac523ede"),a=a(),I(),a),_={class:"head"},E={class:"content"},K={class:"radioList"},D={class:"th"},J={class:"cols col1"},N=M((()=>o("br",null,null,-1))),Q={class:"cols"},j=M((()=>o("br",null,null,-1))),U={class:"cols"},P=M((()=>o("br",null,null,-1))),F={class:"cols"},H=["onClick"],O={class:"cols col1"},X={class:"cols"},$={class:"cols"},q={class:"cols"},x=l({__name:"rangeList",props:["currPosition","currContract","positionType"],emits:["close"],setup(a,{emit:l}){let k=s(!0);const I=a,f=l,b=()=>{f("close")},R=s([]);t((()=>{(()=>{const a=[];let l=1*I.currContract.riskLimit,s=1*I.currContract.riskStep,t=1*I.currContract.initMargin,e=1*I.currContract.mainMargin,i=1*I.currContract.leverage,n=1;for(console.log(i);1*i>10;){let o=t*n,c=e*n,r=l;i=C(1/o,2),a.push({initMarginRate:o,maintMarginRate:c,leverage:i,riskLimit:r}),n++,l+=s}R.value=a})()}));const y=s(I.currPosition?I.currPosition.riskLimit:I.currContract.riskLimit);return(a,l)=>{const s=h;return e(),i(s,{show:p(k),"onUpdate:show":l[0]||(l[0]=a=>d(k)?k.value=a:k=a),position:"bottom",round:"",closeable:"",onClose:b},{default:n((()=>[o("div",_,[o("span",null,c(a.$t("调整风险限额")),1),o("img",{class:"close",onClick:b,src:S})]),o("div",E,[o("ul",K,[o("li",D,[o("span",J,[r(c(a.$t("风险限额"))+" ",1),N,r(" ("+c(I.currContract.settlementKey)+") ",1)]),o("span",Q,[r(c(a.$t("维持"))+" ",1),j,r(" "+c(a.$t("保证金")),1)]),o("span",U,[r(c(a.$t("起始"))+" ",1),P,r(" "+c(a.$t("保证金")),1)]),o("span",F,c(a.$t("最大杠杆")),1)]),(e(!0),u(g,null,v(R.value,((a,l)=>(e(),u("li",{class:A("td "+(y.value==a.riskLimit?"active":"")),key:l,onClick:l=>(async a=>{y.value=a.riskLimit,await T.changeRiskLimit({contractCode:I.currContract.contractCode,positionType:I.positionType,amount:`${a.riskLimit}`}),b()})(a)},[o("span",O,c(a.riskLimit),1),o("span",X,c(p(m)(a.maintMarginRate,4,!1)),1),o("span",$,c(p(m)(a.initMarginRate,4,!1)),1),o("span",q,c(a.leverage),1)],10,H)))),128))])])])),_:1},8,["show"])}}},[["__scopeId","data-v-ac523ede"]]),z={key:0,class:"mainWrap"},V={class:"downList"},W={class:"tittle"},Z={class:"whiteBig"},G={class:"tittle"},Y={class:"radioList"},aa=["onClick"],la={class:"tittle"},sa={class:"g"},ta=(a=>(k("data-v-a1873612"),a=a(),I(),a))((()=>o("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAV1JREFUaEPtl0FqAkEQRaujwog5gpCjaFZZZeFNshoSBHsasogwh3ER75KdW4WAgpIEkkyHMbiKoHT/qs5AzXbmF//930zRhhr+mIb7JwVI3aA2oA1EJqBHKDLAaLk2EB1h5ABt4BDgY1le0TcNv95386IoXiODPVsOacBa277o9haGTN97emlXneF4fLc620XEhyiArJX11mRMVnuRhIAA1KbdU3ljfDWThoABpIKAAqSAgANIQ7AASEKwAUhBsAJIQLADcEOIAByDIO+fJw/5bcQS3kvTAZCfTe7zUSMAjm3p6sNfO5cv/z0Ap3n2I8RtnhVAwjwbgJR5FgBJ83AAafNQgBTmYQDW2j9XStR//tSegGzi30v95cIQ7S/1UuZhDdSD7HTa71Br8Pm2nTvnNqeSQ72HNIAyEzJHAUJSQ2q0AWSaIbO0gZDUkBptAJlmyCxtICQ1pKbxDfwA+N8KQGnNdBMAAAAASUVORK5CYII="},null,-1))),ea={class:"downInfo"},ia={class:"value"},na={class:"value"},oa={class:"value"},ca=l({__name:"index",setup(l){const n=f();b();const{t:r}=R(),d=y(),C=s(n.query.contractCode),h=L((()=>d.contractInfoMap[C.value])),k=L((()=>{let a=C.value+":long",l=d.positionInfo;const s={positionMode:0};if(l[a]){let t=l[a];s.long=t}if(a=C.value+":short",l[a]){let t=l[a];s.short=t}return s}));t((()=>{T.getPositions()}));const I=[{label:r("多仓"),value:"long"},{label:r("空仓"),value:"short"}],S=s("long"),M=s(!1),_=()=>{M.value=!0},E=()=>{M.value=!1};return(l,s)=>{const t=a;return e(),u(g,null,[B(t,{headTt:p(r)("风险限额设置")},null,8,["headTt"]),null!=h.value?(e(),u("div",z,[o("ul",V,[o("li",null,[o("p",W,c(p(r)("当前合约")),1),o("p",Z,c(h.value.keyCapital),1)]),o("li",null,[o("p",G,c(p(r)("方向")),1),o("div",Y,[(e(),u(g,null,v(I,((a,l)=>o("p",{class:A(""+(S.value==a.value?"active":"")),key:l,onClick:l=>(a=>{S.value=a.value})(a)},c(a.label),11,aa))),64))])]),o("li",null,[o("p",la,c(p(r)("风险限额")),1),o("div",{class:"rightCol",onClick:_},[o("span",sa,c(k.value[S.value]?k.value[S.value].riskLimit:h.value.riskLimit)+" "+c(h.value.settlementKey),1),ta])])]),o("ul",ea,[o("li",null,[o("span",null,c(p(r)("起始保证金")),1),o("div",ia,c(p(m)(k.value[S.value]?k.value[S.value].initMarginRate:h.value.initMargin,4,!1)),1)]),o("li",null,[o("span",null,c(p(r)("维持保证金")),1),o("div",na,c(p(m)(k.value[S.value]?k.value[S.value].maintMarginRate:h.value.mainMargin,4,!1)),1)]),o("li",null,[o("span",null,c(p(r)("最大杠杆")),1),o("div",oa,c(k.value[S.value]?k.value[S.value].leverage:h.value.leverage),1)])])])):w("",!0),M.value?(e(),i(x,{key:1,currContract:h.value,currPosition:k.value[S.value],positionType:S.value,onClose:E},null,8,["currContract","currPosition","positionType"])):w("",!0)],64)}}},[["__scopeId","data-v-a1873612"]]);export{ca as default};
