import{b6 as e,b7 as a,aP as t,bR as l,f as n,bS as r,a1 as o,a2 as i,bM as s,w as d,j as c,a4 as u,a as v,a5 as b,au as p,aG as f,a6 as h,aH as g,a3 as y,r as m,h as x,aI as w,aN as k,ay as I,bb as S,bc as C,aF as B,aK as R,aL as T,a_ as z,bn as $,bT as A,bh as j,bU as H,bV as L,bW as W,aM as Z,bX as M,ar as N,az as F,bl as V,be as X,bY as G,bd as O,bm as D,H as K,I as P,G as U,bZ as Y,ai as _,p as q,aw as E,g as J,a9 as Q}from"./index-CioBjTVG.js";import{u as ee}from"./use-id-CcbAo3SX.js";import{T as ae}from"./use-tab-status-_iNRjcO8.js";import{S as te,a as le}from"./index-DcdjDLdy.js";import{u as ne,S as re}from"./index-Bde3MoM6.js";const[oe,ie]=o("tabs");var se=i({name:oe,props:{count:s(Number),inited:Boolean,animated:Boolean,duration:s(b),swipeable:Boolean,lazyRender:Boolean,currentIndex:s(Number)},emits:["change"],setup(e,{emit:a,slots:t}){const l=n(),r=e=>a("change",e),o=()=>{var a;const n=null==(a=t.default)?void 0:a.call(t);return e.animated||e.swipeable?v(te,{ref:l,loop:!1,class:ie("track"),duration:1e3*+e.duration,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:r},{default:()=>[n]}):n},i=a=>{const t=l.value;t&&t.state.active!==a&&t.swipeTo(a,{immediate:!e.inited})};return d((()=>e.currentIndex),i),c((()=>{i(e.currentIndex)})),u({swipeRef:l}),()=>v("div",{class:ie("content",{animated:e.animated||e.swipeable})},[o()])}});const[de,ce]=o("tabs"),ue={type:p("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:f(0),duration:f(.3),animated:Boolean,ellipsis:h,swipeable:Boolean,scrollspy:Boolean,offsetTop:f(0),background:String,lazyRender:h,showHeader:h,lineWidth:b,lineHeight:b,beforeChange:Function,swipeThreshold:f(5),titleActiveColor:String,titleInactiveColor:String},ve=Symbol(de);var be=i({name:de,props:ue,emits:["change","scroll","rendered","clickTab","update:active"],setup(o,{emit:i,slots:s}){let c,b,p,f,h;const M=n(),N=n(),F=n(),V=n(),X=ee(),G=g(M),[O,D]=function(){const e=n([]),a=[];return r((()=>{e.value=[]})),[e,t=>(a[t]||(a[t]=a=>{e.value[t]=a}),a[t])]}(),{children:K,linkChildren:P}=y(ve),U=m({inited:!1,position:"",lineStyle:{},currentIndex:-1}),Y=x((()=>K.length>+o.swipeThreshold||!o.ellipsis||o.shrink)),_=x((()=>({borderColor:o.color,background:o.background}))),q=(e,a)=>{var t;return null!=(t=e.name)?t:a},E=x((()=>{const e=K[U.currentIndex];if(e)return q(e,U.currentIndex)})),J=x((()=>w(o.offsetTop))),Q=x((()=>o.sticky?J.value+c:0)),ae=t=>{const l=N.value,n=O.value;if(!(Y.value&&l&&n&&n[U.currentIndex]))return;const r=n[U.currentIndex].$el,i=r.offsetLeft-(l.offsetWidth-r.offsetWidth)/2;f&&f(),f=function(t,l,n){let r,o=0;const i=t.scrollLeft,s=0===n?1:Math.round(1e3*n/16);return function e(){t.scrollLeft+=(l-i)/s,++o<s&&(r=a(e))}(),function(){e(r)}}(l,i,t?0:+o.duration)},te=()=>{const e=U.inited;I((()=>{const a=O.value;if(!a||!a[U.currentIndex]||"line"!==o.type||T(M.value))return;const t=a[U.currentIndex].$el,{lineWidth:l,lineHeight:n}=o,r=t.offsetLeft+t.offsetWidth/2,i={width:z(l),backgroundColor:o.color,transform:`translateX(${r}px) translateX(-50%)`};if(e&&(i.transitionDuration=`${o.duration}s`),$(n)){const e=z(n);i.height=e,i.borderRadius=e}U.lineStyle=i}))},le=(e,a)=>{const t=(e=>{const a=e<U.currentIndex?-1:1;for(;e>=0&&e<K.length;){if(!K[e].disabled)return e;e+=a}})(e);if(!$(t))return;const l=K[t],n=q(l,t),r=null!==U.currentIndex;U.currentIndex!==t&&(U.currentIndex=t,a||ae(),te()),n!==o.active&&(i("update:active",n),r&&i("change",n,l.title)),p&&!o.scrollspy&&j(Math.ceil(H(M.value)-J.value))},oe=(e,a)=>{const t=K.find(((a,t)=>q(a,t)===e)),l=t?K.indexOf(t):0;le(l,a)},ie=(n=!1)=>{if(o.scrollspy){const r=K[U.currentIndex].$el;if(r&&G.value){const i=H(r,G.value)-Q.value;b=!0,h&&h(),h=function(n,r,o,i){let s,d=t(n);const c=d<r,u=0===o?1:Math.round(1e3*o/16),v=(r-d)/u;return function e(){d+=v,(c&&d>r||!c&&d<r)&&(d=r),l(n,d),c&&d<r||!c&&d>r?s=a(e):i&&(s=a(i))}(),function(){e(s)}}(G.value,i,n?0:+o.duration,(()=>{b=!1}))}}},de=(e,a,t)=>{const{title:l,disabled:n}=K[a],r=q(K[a],a);n||(L(o.beforeChange,{args:[r],done:()=>{le(a),ie()}}),W(e)),i("clickTab",{name:r,title:l,event:t,disabled:n})},ue=e=>{p=e.isFixed,i("scroll",e)},be=()=>{if("line"===o.type&&K.length)return v("div",{class:ce("line"),style:U.lineStyle},null)},pe=()=>{var e,a,t;const{type:l,border:n,sticky:r}=o,i=[v("div",{ref:r?void 0:F,class:[ce("wrap"),{[A]:"line"===l&&n}]},[v("div",{ref:N,role:"tablist",class:ce("nav",[l,{shrink:o.shrink,complete:Y.value}]),style:_.value,"aria-orientation":"horizontal"},[null==(e=s["nav-left"])?void 0:e.call(s),K.map((e=>e.renderTitle(de))),be(),null==(a=s["nav-right"])?void 0:a.call(s)])]),null==(t=s["nav-bottom"])?void 0:t.call(s)];return r?v("div",{ref:F},[i]):i},fe=()=>{te(),I((()=>{var e,a;ae(!0),null==(a=null==(e=V.value)?void 0:e.swipeRef.value)||a.resize()}))};d((()=>[o.color,o.duration,o.lineWidth,o.lineHeight]),te),d(k,fe),d((()=>o.active),(e=>{e!==E.value&&oe(e)})),d((()=>K.length),(()=>{U.inited&&(oe(o.active),te(),I((()=>{ae(!0)})))}));return u({resize:fe,scrollTo:e=>{I((()=>{oe(e),ie(!0)}))}}),S(te),C(te),B((()=>{oe(o.active,!0),I((()=>{U.inited=!0,F.value&&(c=Z(F.value).height),ae(!0)}))})),ne(M,te),R("scroll",(()=>{if(o.scrollspy&&!b){const e=(()=>{for(let e=0;e<K.length;e++){const{top:a}=Z(K[e].$el);if(a>Q.value)return 0===e?0:e-1}return K.length-1})();le(e)}}),{target:G,passive:!0}),P({id:X,props:o,setLine:te,scrollable:Y,onRendered:(e,a)=>i("rendered",e,a),currentName:E,setTitleRefs:D,scrollIntoView:ae}),()=>v("div",{ref:M,class:ce([o.type])},[o.showHeader?o.sticky?v(re,{container:M.value,offsetTop:J.value,onScroll:ue},{default:()=>[pe()]}):pe():null,v(se,{ref:V,count:K.length,inited:U.inited,animated:o.animated,duration:o.duration,swipeable:o.swipeable,lazyRender:o.lazyRender,currentIndex:U.currentIndex,onChange:le},{default:()=>{var e;return[null==(e=s.default)?void 0:e.call(s)]}})])}});const[pe,fe]=o("tab"),he=i({name:pe,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:b,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:h},setup(e,{slots:a}){const t=x((()=>{const a={},{type:t,color:l,disabled:n,isActive:r,activeColor:o,inactiveColor:i}=e;l&&"card"===t&&(a.borderColor=l,n||(r?a.backgroundColor=l:a.color=l));const s=r?o:i;return s&&(a.color=s),a})),l=()=>{const t=v("span",{class:fe("text",{ellipsis:!e.scrollable})},[a.title?a.title():e.title]);return e.dot||$(e.badge)&&""!==e.badge?v(M,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[t]}):t};return()=>v("div",{id:e.id,role:"tab",class:[fe([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:t.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[l()])}}),[ge,ye]=o("tab");const me=Q(i({name:ge,props:N({},F,{dot:Boolean,name:b,badge:b,title:String,disabled:Boolean,titleClass:V,titleStyle:[String,Object],showZeroBadge:h}),setup(e,{slots:a}){const t=ee(),l=n(!1),r=J(),{parent:o,index:i}=X(ve);if(!o)return;const s=()=>{var a;return null!=(a=e.name)?a:i.value},c=x((()=>{const a=s()===o.currentName.value;return a&&!l.value&&(l.value=!0,o.props.lazyRender&&I((()=>{o.onRendered(s(),e.title)}))),a})),b=n(""),p=n("");G((()=>{const{titleClass:a,titleStyle:t}=e;b.value=a?U(a):"",p.value=t&&"string"!=typeof t?Y(_(t)):t}));const f=n(!c.value);return d(c,(e=>{e?f.value=!1:O((()=>{f.value=!0}))})),d((()=>e.title),(()=>{o.setLine(),o.scrollIntoView()})),D(ae,c),u({id:t,renderTitle:l=>v(he,q({key:t,id:`${o.id}-${i.value}`,ref:o.setTitleRefs(i.value),style:p.value,class:b.value,isActive:c.value,controls:t,scrollable:o.scrollable.value,activeColor:o.props.titleActiveColor,inactiveColor:o.props.titleInactiveColor,onClick:e=>l(r.proxy,i.value,e)},E(o.props,["type","color","shrink"]),E(e,["dot","badge","title","disabled","showZeroBadge"])),{title:a.title})}),()=>{var e;const n=`${o.id}-${i.value}`,{animated:r,swipeable:s,scrollspy:d,lazyRender:u}=o.props;if(!a.default&&!r)return;const b=d||c.value;if(r||s)return v(le,{id:t,role:"tabpanel",class:ye("panel-wrapper",{inactive:f.value}),tabindex:c.value?0:-1,"aria-hidden":!c.value,"aria-labelledby":n},{default:()=>{var e;return[v("div",{class:ye("panel")},[null==(e=a.default)?void 0:e.call(a)])]}});const p=l.value||d||!u?null==(e=a.default)?void 0:e.call(a):null;return K(v("div",{id:t,role:"tabpanel",class:ye("panel"),tabindex:b?0:-1,"aria-labelledby":n},[p]),[[P,b]])}}})),xe=Q(be);export{xe as T,me as a};
