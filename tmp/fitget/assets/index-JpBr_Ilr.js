import{_ as e,q as l,t as a,u as t,h as u,f as s,o as n,l as r,z as i,b as o,C as c,m as v,c as m,ao as p,S as d,s as A,af as g,J as y,K as f,an as h,bJ as C,ac as b,G as P,F as k,B as x,a as w,n as B,j as E,bO as S,by as D,w as I,N as T,O as V,M as K,E as j,P as L,bP as U,x as R,bu as O,ca as _,bx as N,c1 as Q,bL as G,bt as M,cb as H,cc as X,cd as J,ce as W}from"./index-CioBjTVG.js";import{D as q}from"./index-BolVOxYO.js";import{B as F}from"./index-h3qOpuro.js";import{A as z}from"./index-DdCt_D9c.js";import{F as Y}from"./index-C9iF-GfQ.js";import{_ as Z,a as $,b as ee,c as le,d as ae,D as te,S as ue,p as se,e as ne,f as re}from"./f_0icon_24_icon_head_star_dark-CCU0K-Qf.js";import{_ as ie,s as oe,a as ce}from"./index-CuHvB06O.js";/* empty css              *//* empty css              *//* empty css              */import{_ as ve}from"./f_0icon_20_icon_lishidingdan-BZ65bQTD.js";import{E as me}from"./emptyPage-Ds2BKBqQ.js";import{c as pe,_ as de}from"./circleItem-Bfnb5kan.js";import{a as Ae,T as ge}from"./index-Onjf-qgk.js";import{_ as ye}from"./up_down_num-Bp3VgaJY.js";import"./use-id-CcbAo3SX.js";import"./index-DXNav8J_.js";/* empty css                                                                   */import"./use-tab-status-_iNRjcO8.js";import"./index-DcdjDLdy.js";import"./index-Bde3MoM6.js";const fe=e=>(y("data-v-a3e02285"),e=e(),f(),e),he={class:"content"},Ce={class:"bigTt"},be={class:"topList"},Pe=fe((()=>o("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASzSURBVHgB7ZldUhtHEMe7ZwWOqxJHN/D6BBEnQJwAboBcgKvyZPySIILM8BEDeYE8pcpAIZ8A+QSIG8g32NxAKadsMNpp9+jDSDKSkHoW4fL8XrRaqaTt/+z0x38BPB6Px+PxeDye7xKEhFnWJ+kfH9QyqCBDBkNEeIwEISCmO75IVCWEqgKIDNI7MlD5/zJVOdBPq5AgiQhgg/7pYS0HhLMccAYI0jAiBFAGpLdXplbazf8agWOcClBf7YfmuQJalgTdCxajeEVXGy6FcCZAYe9wGQHXkwi8G0I8eP9RbbjYHk4EKOwenyBQDu6W6BNdzUjvBgVCCnvH+2MI3hJOwsSp3XYgQCSA3jnMIvF+HxecYLnCiP5fJEANMAdjRiHOgwCRAAHXdBg/IQgQCUAE/8K4QaiAAJEAXO+LMGYopjcgQFwG13aOigpBtA8FRJsri09AgLgMbucXc4ZAtAojEinuA0CIsAz+E9pXKwInhA24I1jwv9VFMKW5CVr983UGBIgEiFVqrnW8mV/SioInkOTdQHSuiGZY8GXdbIMDFYgEEOWA9d2js5hXfju/VG4/r3dOwhhMFsHkeOydBhnvOPCSMlTSfzzryPgr/D+TaM42VxZGzgNiAXhCC/v15Nq2quwHxOwHoAG7WnUvgEtomj2Cn+3w1CqnPDpXOVgbZKQUVuBjUNY9Bh7bAj96EJ/ZbpAT4chxuBAgy4cRkdnYyj8rwh2w+tfrTMoEp7wnQvteIkAK3MBOjzop7B5Nu57X2/niNxjSdXfAASIBDNF/iNfi81FuEidyLEQZyLx5fzlRcjGzr/HQFSh8ThBnv/IbCES/LxKAA7b7dfaG81lAlX30Q2zvijJPjOeGsGLIRK+6Elk3trTWaCKDAd/ehNOsb7aZJ3pA5yCLYXT0Pie4i4vmiqRCHs3Sxtjgcba1P3v8Kyc77Fw5pPQobpKKzZQeIGo/EnOFrVdg+MVBGeyJaZRgDQISt8ULO8c5VLTv2iskQy+2VpcO7F2oX4yeZ8SzwCC28gtFZYIp1joCF9huUJkpG3z9/UVtfK3wbdH5pzy4qJn63h+FRoNUb4O55c7q3673vNSVSnwLtLO2dzSnCE5v813bHbLZWiZQ5eBSlW7qCOtWPOH+2DrBbla4hA1qgmxyjEFxxTBpbo3reYEUr7BR1UBRFdBE8GEi0gP6h5d7R/OcV4r2+N4I8HLnUBulaPv3hcRG48ZjN7Pe7kbfh1b4C7xP9dreMbgW4fqxW+z0sZtzASyuRLBdYd1zsA9ZG23w1whN0aEEsDW93+ek6BdsXmQ/EWztji/MXPd59g94qMLHnAAzXJ9CY0fmATOPMfQWBAwlACKd9P1C18X2E+Hm38LGTyDcdtiLUpepAxCQeB9gRSi8Oux4fCXp3Nqom6JaOG3eRSMUBVgrgUtsU9Q0RUHIUFtg0JOglsXVdqqxSl0Xaj1DAzEMjQ3cumxdHqSEoQTYyi+G/T63fQBv7vXm2xuDb1ALb9uCNDpCKPFTqJLLwFskUgahb/CcuRs+YgfXxiibooQRAVYC+FTWCdlrLZx3ghzBfL/g7xtOkyABRd9S8B6Px+PxeDwej8fz3fIZf2gyt98CoA0AAAAASUVORK5CYII="},null,-1))),ke={class:"label"},xe=fe((()=>o("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAS5SURBVHgB7ZrNTiNHEMererwJhyQiTxDzBGEfIAocIuUW5wnWFmalnHa5BExsGD6yNrlATpHAyN4nCJtzJCAvAHmCnbyBFeUAi6cr1R4GN7M22O4ebLT9k0Yej3s8XTXVPf+qHgCHw+FwOBwOx4cJwhjwq79l4/3W5VRrzy+0YEyk6oDVn/dnvQzOCcIviWAWBGSBYBp696TFbc55rwVIp2GbTl799PwcUsa6A/xf9mfbocgLAc/6Gjs4AQGcXNHVRq30QwApYM0BK9VG9gmGDf7DOUgBdkQzDUdYcUBl5+AlAq5buOP3QpKWtlYX98ASHhiytnO4jgQ13p2CBwARv/3qm+/grz//OAULGEVApXqYR6QGjAFJNL9dWjwBQwQYIJCewZjgSFgHCxg5gFKa8AYB1WPVAkYOUM9ueOQYOQAj4TIWEOEILGDoAK8wlijgayJrArCAkQP8UiEgiUvwkLDxMoSCb0kQGTngpd+Y3iotNAV5M9yzANInECjnt1eLR/5uw4roMnLAJx+3OzOxioTNlYUZIiyk4gg1zIg2xIX31P8xSpDCC5kDCxgJobVa/e2/3KlkOhsJJO4g4tcjy2NltKQ3fIeafkLwqMj7bEqeKaeDIRkwI/vpVLjLnwX9oBoW/KE2zv0P5kIBsygxy8qhEzEEar8LdiZSCoCQsz8897zwPL7TSSLjQ59TZyt5jGkE0PVu8I6u5tNKWdPETAh1yX6ET95WavXGilbteQxYVYIcTvnYEeVX9ZwKV7BMpXZoNfkymgOUEuyVDyhHoIA8j1XucP2Ex+vfKIg1Q6QcM9AO9PbvpDctUGTRoyy3mf7vMrPXq06ojEegPCTmHCMbwACfq0BShGcWCyGB4Lmkl8jRjAduM2NLCBnPpDZrAkSysFV63nzvGprxN8RFVJKve50zKEYOUGNchWonElAeswlZGBHuSHNjpfheaJd36jlB8Ptd55rUCydGCfZLbraXi0dKBd5u3HPyPR5l0jWsCGFDv6gSQF1H0JtBM0UiOk2O6VUur8f7m6VFX3fC5nLx807+QfBaO0WJsqGHoqkOiJXgLSJHLOaijtI8IS1xZ39lI07VxmP3H31jFzT185V6zEhxtrZTvym5JZ3QibpSMR85O4IjIVfmc2EIJlIJlqv1pkDoGC8lfK+yv5trVg/8jjP0fnB7uG7fby7px0QqQaGSqGsyJAP9t6TxnfZaBA1bp5xQJdh9mvgDrA8mssUsDMFEKMG7RE38qIU7UMUReRnCKKReE1RrhTyeXyDhLof2sdokR4m+JSMlmhgj4kftnVxobXC4Qu1E1ASTRuoV314LIGVejrt1wKNWfCN40hxqycx4ErRUE5zTv/D/3Sx+qghKGsyPVl8/poonqlaonJCBq6EWTq2+HxDlBbA+rCRW7wBsrRTn9WP8iFWGvNAOBZwrbIQ8j2Q8caYOSER/e3mhqw14KPlDvm2Syhsio9QEey126nqg73kJJwxLKg7Qua8miFHFV2V2R73W/ZXwgXsWQtuhfDrq6zSpO8AGKtsMRTuHEnLKeey0L+Lf+qXQg/IoHJAkluCmxitsSeEHx4bxj5ZKdT8PDofD4XA4HA6Hw+EYnf8BW1JvoGFxjJoAAAAASUVORK5CYII="},null,-1))),we={class:"label"},Be=fe((()=>o("img",{src:Z},null,-1))),Ee=fe((()=>o("img",{src:$},null,-1))),Se=e({__name:"topLayout",props:["currPair","tabActive"],emits:["close"],setup(e,{emit:y}){const{currPair:f}=e,h=l(),C=a(),{t:b}=t(),P=u((()=>{if(!h.isLogin())return{};const e=Object.create(null);return h.selfSpotTradePairs.forEach((l=>{e[l.symbol]=!0})),e}));let k=s(!0);const x=y,w=()=>{x("close")},B=s(!1),E=async()=>{h.isLogin()?(await d.addSelfTradePair(f.symbol),B.value=!B.value,x("close"),A(b("加入自选"))):h.connect()},S=async()=>{await d.removeSelfTradePair(f.symbol),B.value=!B.value,x("close"),A(b("移出自选"))};return(l,a)=>{const t=g;return n(),r(t,{show:v(k),"onUpdate:show":a[2]||(a[2]=e=>p(k)?k.value=e:k=e),position:"top",style:{height:"25%"},round:"",closeable:"",onClose:w},{default:i((()=>[o("div",he,[o("div",Ce,c(v(b)("精选功能")),1),o("ul",be,[o("li",{onClick:a[0]||(a[0]=l=>v(C).push("/recharge/"+(1==e.tabActive?e.currPair.rightKey:e.currPair.leftKey)))},[Pe,o("p",ke,c(v(b)("充值")),1)]),o("li",{onClick:a[1]||(a[1]=l=>v(C).push("/fundTransfer/spot/contract/"+(1==e.tabActive?e.currPair.rightKey:e.currPair.leftKey)))},[xe,o("p",we,c(v(b)("划转")),1)])]),P.value[e.currPair.symbol]?(n(),m("div",{key:0,class:"bottomSave",onClick:S},[Be,o("p",null,c(v(b)("已添加")+`${e.currPair.leftKey}/${e.currPair.rightKey}`+v(b)("到自选")),1)])):(n(),m("div",{key:1,class:"bottomSave",onClick:E},[Ee,o("p",null,c(v(b)("添加")+`${e.currPair.leftKey}/${e.currPair.rightKey}`+v(b)("到自选")),1)]))])])),_:1},8,["show"])}}},[["__scopeId","data-v-a3e02285"]]),De={class:"top"},Ie={key:0,class:"list"},Te=["onClick"],Ve={class:"leftCol"},Ke={class:"whiteBig"},je={key:0,class:"greyS"},Le={class:"rightCol"},Ue={class:"whiteBig"},Re=e({__name:"coinTypeList",props:["currPair"],setup(e){const l=e,t=s(!1),i=()=>{t.value=!t.value},v=h(),p=C(),d=a(),A=u((()=>l.currPair)),g=u((()=>{let e=v.list("spot");if(!t.value)return e;const{leftKey:l,rightKey:a}=A.value;let u=[l,a];return console.log(u),e.filter((e=>u.indexOf(e.key)>-1))})),y=u((()=>p.coinConfigMap||{}));return(e,l)=>{const a=b("CoinLogo"),u=b("CoinToLegal");return n(),m(k,null,[o("div",De,[o("span",{class:P("gou "+(t.value?"active":"")),onClick:i},null,2),o("span",null,c(e.$t("当前币对资产")),1)]),g.value.length>0?(n(),m("ul",Ie,[(n(!0),m(k,null,x(g.value,((e,l)=>(n(),m("li",{key:l,onClick:l=>{return a=e.key,void d.push("/fundDetail/"+a);var a}},[o("div",Ve,[w(a,{class:"coin",coin:e.key},null,8,["coin"]),o("div",null,[o("p",Ke,c(e.key),1),y.value[e.key]?(n(),m("p",je,c(y.value[e.key].alias),1)):B("",!0)])]),o("div",Le,[o("p",Ue,c(e.cash),1),w(u,{class:"greyS",value:e.cash,coin:e.key},null,8,["value","coin"])])],8,Te)))),128))])):(n(),r(me,{key:1}))],64)}}},[["__scopeId","data-v-9cf06f16"]]),Oe=e=>(y("data-v-29700ad1"),e=e(),f(),e),_e={class:"top"},Ne={class:"leftCol"},Qe=Oe((()=>o("img",{class:"chexiao",src:de},null,-1))),Ge={key:0,class:"list"},Me={class:"leftCol"},He=Oe((()=>o("span",{class:"line"},"/",-1))),Xe={class:"mid"},Je={class:"whiteF"},We=Oe((()=>o("span",{class:"line"},"/",-1))),qe={class:"row"},Fe={key:0,class:"value"},ze={class:"white"},Ye={key:1,class:"value"},Ze={class:"white"},$e={class:"row"},el={class:"value"},ll={class:"white"},al={key:0,class:"row"},tl={class:"value"},ul={class:"white"},sl={class:"rightCol"},nl="global.public.platform@202",rl=e({__name:"currentList",props:["currPair"],emits:["change"],setup(e,{emit:a}){const p=s(!1),g=()=>{p.value=!p.value},y=e,f=u((()=>y.currPair)),h=a;let C=s([]);const{t:b}=t(),R=l(),O=async()=>{const{data:e}=await d.querySpotEntrusts({pageNum:1,pageSize:10},{symbol:p.value?f.value.symbol:null});C.value=e.list,h("change",C.value.length)},_=async()=>{await d.cancelAllSpotEntrust({symbol:p.value?f.value.symbol:null}),A(b("撤销全部发起成功"))},N=e=>{U(C.value,e,f.value.symbol),h("change",C.value.length)};return E((()=>{R.isLogin()&&(O(),S.on(nl,N))})),D((()=>{S.off(nl,N)})),I((()=>f.symbol),(()=>{O()})),I((()=>p.value),(()=>{O()})),(e,l)=>{const a=F;return n(),m(k,null,[o("div",_e,[o("div",Ne,[o("span",{class:P("gou "+(p.value?"active":"")),onClick:g},null,2),o("span",null,c(v(b)("隐藏其他交易对")),1)]),w(a,{size:"small",onClick:_},{default:i((()=>[Qe,o("span",null,c(v(b)("撤销全部")),1)])),_:1})]),v(C).length>0?(n(),m("ul",Ge,[(n(!0),m(k,null,x(v(C),((e,l)=>(n(),m("li",{key:l},[o("div",Me,[o("div",null,[o("div",{class:P("B"==e.entrustType?"greenTittle":"redTittle")},[o("span",null,c(v(T)(e.entrustMode)),1),He,o("span",null,c(v(V)(e.entrustType)),1)],2),w(pe,{rate:v(K)(e)},null,8,["rate"])]),o("div",Xe,[o("div",Je,[j(c(e.leftCoin.toUpperCase())+" ",1),We,j(" "+c(e.rightCoin.toUpperCase()),1)]),o("div",qe,[o("span",null,c(v(b)("数量")),1),"20"==e.entrustMode?(n(),m("p",Fe,[o("span",ze,c("B"==e.entrustType?e.rightAmountDeal:e.leftAmountDeal),1),o("span",null," / "+c("B"==e.entrustType?e.rightAmount:e.leftAmount),1)])):(n(),m("p",Ye,[o("span",Ze,c(e.leftAmountDeal),1),o("span",null," / "+c(e.leftAmount),1)]))]),o("div",$e,[o("span",null,c(v(b)("价格")),1),o("p",el,[o("span",ll,c(e.entrustPrice||v(b)("市价")),1)])]),e.triggerPrice?(n(),m("div",al,[o("span",null,c(v(b)("触发价")),1),o("p",tl,[o("span",ul,c(e.triggerPrice),1)])])):B("",!0)])]),o("div",sl,[o("div",null,c(v(L)(e.createTime)),1),"20"!=e.orderStatus?(n(),r(a,{key:0,size:"mini",onClick:l=>(async({orderNo:e})=>{await d.cancelSpotEntrust({orderNo:e}),A(b("撤单发起成功"))})(e)},{default:i((()=>[j(c(v(b)("撤单")),1)])),_:2},1032,["onClick"])):B("",!0)])])))),128))])):(n(),r(me,{key:1}))],64)}}},[["__scopeId","data-v-29700ad1"]]),il={class:"downListWrap"},ol=e({__name:"downList",props:["currPair"],setup(e){const t=a(),u=l(),c=s(0),p=()=>{t.push("/spot/entrusts")},d=s(0),A=e=>{d.value=e};return I(c,(()=>{1==c.value&&(u.isLogin()||u.connect())})),(l,a)=>{const t=Ae,s=ge;return n(),m("div",il,[o("img",{class:"historyLink",onClick:p,src:ve}),w(s,{active:c.value,"onUpdate:active":a[0]||(a[0]=e=>c.value=e),shrink:"",animated:"",background:"var(--Misc-body-bg)"},{default:i((()=>[w(t,{title:l.$t("当前委托")+"("+d.value+")",key:"tab1"},{default:i((()=>[w(rl,{currPair:e.currPair,onChange:A},null,8,["currPair"])])),_:1},8,["title"]),v(u).isLogin()?(n(),r(t,{title:l.$t("资产"),key:"tab2"},{default:i((()=>[w(Re,{currPair:e.currPair},null,8,["currPair"])])),_:1},8,["title"])):(n(),r(t,{title:l.$t("资产"),key:"tab3"},null,8,["title"]))])),_:1},8,["active"])])}}},[["__scopeId","data-v-127aa800"]]);var cl={VITE_OPENAPI:"https://app.fitget.pro",VITE_VERSION:"v1",VITE_FALLBACK_LANG:"zh",VITE_SIGNATURE_KEY:"4b424e19fd7287dc2378271f985bd0b8",VITE_WEBSOCKET_MQTT_URL:"wss://dapp.fitget.pro/mqtt",VITE_MERCHANT_ID:"1",VITE_FUSION_PROD_ID:"5",BASE_URL:"/SomethingBoring/tmp/fitget",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const vl=e=>(y("data-v-59adeb2e"),e=e(),f(),e),ml={key:0,class:"midBlockWrap"},pl={class:"toolHead"},dl=vl((()=>o("img",{class:"switch",src:ce},null,-1))),Al={class:"cointype"},gl=vl((()=>o("em",{class:"line"}," / ",-1))),yl={class:"cointype"},fl={class:"percent"},hl={class:"leftCartWrap"},Cl={class:"numBar"},bl={class:"th"},Pl={class:"midRow"},kl={class:"greySmall"},xl={class:"downTools"},wl=[vl((()=>o("img",{src:ne},null,-1)))],Bl={class:"rightForm"},El={class:"tabBar"},Sl=["onClick"],Dl={class:"selectInput"},Il={class:"tittlePlace"},Tl={class:"innerTabWrap"},Vl={class:"innerTab"},Kl=["onClick"],jl={class:"innerTabContent"},Ll={class:"percentChooseRow"},Ul={class:"tipsRow"},Rl={class:"rightCol"},Ol={key:0},_l={key:1},Nl={class:"submitBtn"},Ql={class:"errorContent"},Gl={class:"bigTt"},Ml={class:"desc"},Hl={class:"btnWrap"},Xl=e({__name:"index",setup(e){const p=cl,{VITE_MERCHANT_ID:g}=p,y=[`exchange.public.${g}.spot.ticker`],f=R(),C=a(),{t:S}=t(),T=O();_();const V=l(),K=h(),L=s(f.params.symbol),U=s(!1),Z=s(!1),$=s(!1),ne=s(!1);s("");const ce=s(0),ve=[{name:S("预设")},{name:S("展示卖单")},{name:S("展示买单")}],me=[{name:S("充值")}],pe=[{label:S("买入"),value:1},{label:S("卖出"),value:2}],de=[{label:S("数量"),value:1},{label:S("成交额"),value:2}],Ae=s(2==f.query.entrustType?2:1),ge=s(1),fe=s(1);s("");const he=s(""),Ce=s({entrustPrice:"",entrustAmount:"",entrustType:"",entrustStrategy:"GTC",entrustMode:"",triggerPrice:""}),be=s({leftAmount:"",rightAmount:""}),Pe=s(!1),ke=[{text:S("限价单"),value:1},{text:S("市场单"),value:2},{text:S("限价止盈止损"),value:3}],xe=()=>{U.value=!0},we=()=>{Z.value=!0},Be=()=>{$.value=!0},Ee=()=>{ne.value=!0},De=()=>{Pe.value=!0},Ie=()=>{Pe.value=!1},Te=s(!1),Ve=()=>{Te.value=!0},Ke=()=>{Te.value=!1},je=e=>{Ce.value.entrustPrice=1*e},Le=e=>{if(!V.isLogin())return!1;console.log(e);let l=Qe.value.ticker.last;if(l<=0)return;let a=0,t=Ce.value;if(1==Ae.value){if(a=ze.value,a*=1,a<=0)return;let u=a*e/l,s=a*e;if(u>s&&(u=s),t.entrustAmount=Re(u),"2"==fe.value){let l=be.value;l.leftAmount=Re(u),l.rightAmount=Re(a*e)}}else{if(a=Fe.value,a*=1,a<=0)return;let u=a*e;if(t.entrustAmount=Re(u),"2"==fe.value){let e=be.value;e.leftAmount=Re(u),e.rightAmount=Re(u/l)}}t.entrustPrice=l},Ue=e=>{let l=Qe.value;return J(e,l.maxPriceDecimalDigit)?W(e,l.maxPriceDecimalDigit):e},Re=e=>{let l=Qe.value;return J(e,l.maxCountDecimalDigit)?W(e,l.maxCountDecimalDigit):e},Oe=()=>{let e=Ce.value;e.entrustPrice=Ue(e.entrustPrice),e.entrustAmount=Re(e.entrustAmount),e.entrustPrice&&e.entrustAmount&&(console.log(11111),he.value=Re(e.entrustPrice*e.entrustAmount))},_e=()=>{Ce.value={entrustPrice:"",entrustAmount:"",entrustType:"",entrustStrategy:"GTC",entrustMode:"",triggerPrice:""},be.value={leftAmount:"",rightAmount:""},he.value=""},Ne=async()=>{if(!(()=>{let e=Ce.value;if(console.log(11223344),console.log(he.value),console.log(e.entrustAmount),console.log(ze.value),console.log(11223344),!e.entrustAmount)return!1;let l=fe.value;if(console.log(11223344),console.log(l),console.log(Ae.value),"1"==l||"3"==l){if(he.value<=0)return!1;if(1==Ae.value){if(Number(he.value)>Number(ze.value))return Ee(),!1}else if(Number(e.entrustAmount)>Number(Fe.value))return Ee(),!1;if(!e.entrustPrice)return!1;if("3"==l&&!e.triggerPrice)return!1}else if("2"==l){if(1==Ae.value){if(Number(e.entrustAmount)>Number(ze.value))return Ee(),!1}else if(Number(e.entrustAmount)>Number(Fe.value))return Ee(),!1;if(!e.entrustPrice)return!1}return!0})())return!1;if(!(()=>{if(2==fe.value)return!0;let{priceRange:e,ticker:l,rightKey:a}=Qe.value;if(0==e)return!0;const t=l.last,u=Ce.value.entrustPrice;if(0==t)return!0;const s=1*t*e;return u>1*t+1*s?(A(S("下单价格不能大于")+`${1*t+1*s} ${a}`),!1):!(u<1*t-1*s&&(A(S("下单价格不能小于")+`${1*t-1*s} ${a}`),1))})())return!1;if(!(()=>{let{maxCount:e,minCount:l,leftKey:a,ticker:t}=Qe.value,u=Ce.value.entrustAmount;if("2"==fe.value&&1==Ae.value){let a=t.last;if(0==a)return!0;e=Re(e*a),l=Re(l*a)}let s=Re(u);return 0!=e&&1*s>1*e?(A(S("下单数量不能大于")+`${1*e} ${a}`),!1):!(0!=l&&1*s<1*l&&(A(S("下单数量不能小于")+`${1*l} ${a}`),1))})())return!1;let e=Ce.value,l=Qe.value;e.symbol=l.symbol,e.entrustType=1==Ae.value?"B":"S";let a=fe.value;"1"==a?e.entrustMode="10":"2"==a?e.entrustMode="20":"3"==a&&(e.entrustMode="11"),await d.createSpotEntrust(e),A(S("下单成功")),window.location.reload()};E((()=>{let e=T.spotPairList;e=e.filter((e=>e.symbol==L.value)),0==e.length&&T.spotPairList.length>0?C.push({path:"/spot/"+T.spotPairList[0].symbol}):(N.subscribes(y),N.clearAndStartSpotNewest(L.value),N.clearCurrAndSubscribeDisc(L.value,Me.value))})),D((()=>{N.unsubscribes(y),N.clearCurrSpotNewest(),N.unSubscribeCurrDisc()}));const Qe=u((()=>{const e=L.value.toUpperCase();return T.spotPairMap[e]})),Ge=u((()=>Qe.value?Qe.value.depths[ce.value]:{})),Me=u((()=>Qe.value?Ge.value.value:1)),He=s(0),Xe=s(0),Je=s(0),We=u((()=>{const e=T.discBuyList;if(!e)return[];let l=He.value,a=2==l?12:0==l?6:0;a=a>e.length?e.length:a;let t=0,u=0;const s=[];for(;t<a;t++){let l=e[t];u+=1*l.amount,l.total=u,s.push(l)}return Je.value=u,s})),qe=u((()=>{const e=T.discSellList;if(!e)return[];let l=He.value,a=1==l?12:0==l?6:0;a=a>e.length?e.length:a;let t=0,u=0;const s=[];for(;t<a;t++){let l=e[t];u+=1*l.amount,l.total=u,s.unshift(l)}return Xe.value=u,s})),Fe=u((()=>K.getCash("spot",Qe.value.leftKey))),ze=u((()=>K.getCash("spot",Qe.value.rightKey)));I((()=>Ce.value.entrustPrice),(e=>{el.value||e&&Oe()})),I((()=>Ce.value.entrustAmount),(e=>{el.value||e&&Oe()}));const Ye=()=>{let e=be.value.leftAmount;e&&(Ce.value.entrustPrice=Qe.value.ticker.last,1==Ae.value?Ce.value.entrustAmount=Re(e*Ce.value.entrustPrice):Ce.value.entrustAmount=e)},Ze=()=>{let e=be.value.rightAmount;console.log(e),e&&(Ce.value.entrustPrice=Qe.value.ticker.last,2==Ae.value?Ce.value.entrustAmount=Re(e/Ce.value.entrustPrice):Ce.value.entrustAmount=e)},$e=()=>{he.value>=0&&(()=>{let e=Ce.value,l=e.entrustPrice;if(l||(l=Qe.value.ticker.last),l<=0)return;let a=he.value;if(console.log(a),a<0)return;console.log(l);let t=a/l;0==a&&(t=0),0==l&&(t=0),e.entrustAmount=t,e.entrustPrice=Ue(l)})()},el=s(!1);I((()=>fe.value),(e=>{_e()})),I((()=>Ae.value),(e=>{_e()})),I((()=>ge.value),(e=>{_e()})),Q(((e,l,a)=>{L.value=e.params.symbol,ce.value=0,_e(),N.clearAndStartSpotNewest(L.value),N.clearCurrAndSubscribeDisc(L.value,Me.value),a(),console.log("beforeRouteUpdate")}));const ll=()=>{C.push({path:"/spot/kline/"+Qe.value.symbol})};return(e,l)=>{const a=b("CoinToLegal"),t=re,u=te,s=ue,p=Y,d=F,A=z,g=q;return Qe.value?(n(),m("div",ml,[o("div",pl,[o("div",{class:"leftCol",onClick:De},[dl,o("span",Al,c(Qe.value.leftKey),1),gl,o("span",yl,c(Qe.value.rightKey),1),o("span",fl,c(v(M)(Qe.value.ticker.changeRange)),1)]),o("div",{class:"rightCol"},[o("img",{onClick:ll,src:ee}),o("img",{onClick:Ve,src:le})])]),o("div",null,[o("div",{class:P("content "+(3!=fe.value?"stranchContent":"addGapContent"))},[o("div",hl,[o("div",Cl,[o("div",bl,[o("div",null,[o("p",null,c(v(S)("价格")),1),o("p",null," ("+c(Qe.value.rightKey)+") ",1)]),o("div",null,[o("p",null,c(v(S)("数量")),1),o("p",null," ("+c(Qe.value.leftKey)+") ",1)])]),w(ie,{defaulRowNum:2==He.value?0:6,isRedBg:1,isRedFont:1,list:qe.value,maxTotal:Xe.value,maxCountDecimalDigit:Qe.value.maxCountDecimalDigit,priceLength:Ge.value.len,onChoose:je},null,8,["defaulRowNum","list","maxTotal","maxCountDecimalDigit","priceLength"]),o("div",Pl,[w(ye,{class:"greenBig",pairKey:Qe.value.key,value:Qe.value.ticker.last},null,8,["pairKey","value"]),o("p",kl,[w(a,{value:Qe.value.ticker.last,coin:Qe.value.rightKey},null,8,["value","coin"])])]),w(ie,{defaulRowNum:1==He.value?0:6,list:We.value,maxTotal:Je.value,maxCountDecimalDigit:Qe.value.maxCountDecimalDigit,priceLength:Ge.value.len,onChoose:je},null,8,["defaulRowNum","list","maxTotal","maxCountDecimalDigit","priceLength"])]),o("div",xl,[o("div",{class:"select",onClick:xe},c(Ge.value.label),1),o("div",{class:"typeIcons",onClick:we},wl)])]),o("div",Bl,[o("div",El,[(n(),m(k,null,x(pe,((e,l)=>o("p",{class:P(""+(e.value==Ae.value?"active":"")),key:l,onClick:l=>{return a=e.value,void(Ae.value=a);var a}},c(e.label),11,Sl))),64))]),o("div",Dl,[w(u,null,{default:i((()=>[w(t,{modelValue:fe.value,"onUpdate:modelValue":l[0]||(l[0]=e=>fe.value=e),options:ke},null,8,["modelValue"])])),_:1})]),1==fe.value?(n(),r(s,{key:0,"allow-empty":!0,min:Qe.value.minPrice,max:Qe.value.maxPrice,step:v(H)(Qe.value.maxPriceDecimalDigit),placeholder:v(S)("价格")+"("+Qe.value.rightKey+")",modelValue:Ce.value.entrustPrice,"onUpdate:modelValue":l[1]||(l[1]=e=>Ce.value.entrustPrice=e),modelModifiers:{number:!0}},null,8,["min","max","step","placeholder","modelValue"])):B("",!0),2==fe.value?(n(),m(k,{key:1},[o("div",Il,c(v(S)("市价")),1),o("div",Tl,[o("div",Vl,[(n(),m(k,null,x(de,((e,l)=>o("p",{class:P(""+(e.value==ge.value?"active":"")),key:l,onClick:l=>{return a=e.value,void(ge.value=a);var a}},c(e.label),11,Kl))),64))]),o("div",jl,[1==ge.value?(n(),r(s,{key:0,"allow-empty":!0,min:Qe.value.minCount,max:Qe.value.maxCount,step:v(X)(Qe.value.maxCountDecimalDigit),placeholder:Qe.value.leftKey,modelValue:be.value.leftAmount,"onUpdate:modelValue":l[2]||(l[2]=e=>be.value.leftAmount=e),modelModifiers:{number:!0},onChange:Ye},null,8,["min","max","step","placeholder","modelValue"])):B("",!0),2==ge.value?(n(),r(s,{key:1,"allow-empty":!0,step:v(X)(Qe.value.maxCountDecimalDigit),placeholder:Qe.value.rightKey,modelValue:be.value.rightAmount,"onUpdate:modelValue":l[3]||(l[3]=e=>be.value.rightAmount=e),modelModifiers:{number:!0},onChange:Ze},null,8,["step","placeholder","modelValue"])):B("",!0)])])],64)):B("",!0),3==fe.value?(n(),m(k,{key:2},[w(s,{"allow-empty":!0,min:Qe.value.minPrice,max:Qe.value.maxPrice,step:v(H)(Qe.value.maxPriceDecimalDigit),placeholder:v(S)("触发价")+"("+Qe.value.rightKey+")",modelValue:Ce.value.triggerPrice,"onUpdate:modelValue":l[4]||(l[4]=e=>Ce.value.triggerPrice=e),modelModifiers:{number:!0}},null,8,["min","max","step","placeholder","modelValue"]),w(s,{"allow-empty":!0,min:Qe.value.minPrice,max:Qe.value.maxPrice,step:v(H)(Qe.value.maxPriceDecimalDigit),placeholder:v(S)("委托价")+"("+Qe.value.rightKey+")",modelValue:Ce.value.entrustPrice,"onUpdate:modelValue":l[5]||(l[5]=e=>Ce.value.entrustPrice=e),modelModifiers:{number:!0}},null,8,["min","max","step","placeholder","modelValue"])],64)):B("",!0),2!=fe.value?(n(),r(s,{key:3,"allow-empty":!0,min:Qe.value.minCount,max:Qe.value.maxCount,step:v(X)(Qe.value.minCount),placeholder:v(S)("数量")+"("+Qe.value.leftKey+")",modelValue:Ce.value.entrustAmount,"onUpdate:modelValue":l[6]||(l[6]=e=>Ce.value.entrustAmount=e),modelModifiers:{number:!0}},null,8,["min","max","step","placeholder","modelValue"])):B("",!0),o("div",Ll,[w(se,{onChange:Le})]),2!=fe.value?(n(),r(p,{key:4,class:"lastInput",onInput:$e,onFocus:l[7]||(l[7]=e=>el.value=!0),onBlur:l[8]||(l[8]=e=>el.value=!1),modelValue:he.value,"onUpdate:modelValue":l[9]||(l[9]=e=>he.value=e),modelModifiers:{number:!0},type:"number",placeholder:v(S)("成交金额")+"("+Qe.value.rightKey+")"},null,8,["modelValue","placeholder"])):B("",!0),o("div",Ul,[o("span",null,c(v(S)("可用")),1),o("div",Rl,[2==Ae.value?(n(),m("span",Ol,c(Fe.value)+" "+c(Qe.value.leftKey),1)):(n(),m("span",_l,c(ze.value)+" "+c(Qe.value.rightKey),1)),o("img",{src:ae,onClick:Be})])]),o("div",Nl,[v(V).isLogin()?(n(),r(d,{key:0,onClick:G(Ne,["stop"]),type:1==Ae.value?"custom":"danger",block:""},{default:i((()=>[j(c(1==Ae.value?v(S)("买入"):v(S)("卖出"))+" "+c(Qe.value.leftKey),1)])),_:1},8,["type"])):(n(),r(d,{key:1,onClick:l[10]||(l[10]=G((e=>v(V).connect()),["stop"])),type:1==Ae.value?"primary":"danger",block:""},{default:i((()=>[j(c(v(S)("登录")),1)])),_:1},8,["type"]))])])],2),w(ol,{currPair:Qe.value},null,8,["currPair"])]),w(A,{show:U.value,"onUpdate:show":l[11]||(l[11]=e=>U.value=e),actions:Qe.value.depths,"cancel-text":v(S)("取消"),"close-on-click-action":"",onSelect:l[12]||(l[12]=(e,l)=>{ce.value=l,N.clearCurrAndSubscribeDisc(L.value,Me.value)})},null,8,["show","actions","cancel-text"]),w(A,{show:Z.value,"onUpdate:show":l[13]||(l[13]=e=>Z.value=e),actions:ve,"close-on-click-action":"",onSelect:l[14]||(l[14]=(e,l)=>{He.value=l})},null,8,["show"]),w(A,{show:$.value,"onUpdate:show":l[15]||(l[15]=e=>$.value=e),actions:me,"close-on-click-action":"","cancel-text":v(S)("取消"),onSelect:l[16]||(l[16]=(e,l)=>{0==l?v(C).push("/recharge/"+(1==Ae.value?Qe.value.rightKey:Qe.value.leftKey)):v(C).push("/fundTransfer/spot/contract/"+(1==Ae.value?Qe.value.rightKey:Qe.value.leftKey))})},null,8,["show","cancel-text"]),w(g,{show:ne.value,"onUpdate:show":l[19]||(l[19]=e=>ne.value=e),showConfirmButton:!1},{default:i((()=>[o("div",Ql,[o("div",Gl,c(v(S)("余额不足")),1),o("div",Ml,c(v(S)("下单失败，可用余额不足。请从其他账户划转资产，或充值资金后再下单。")),1),o("div",Hl,[w(d,{onClick:l[17]||(l[17]=e=>v(C).push("/fundTransfer/spot/contract/"+(1==Ae.value?Qe.value.rightKey:Qe.value.leftKey)))},{default:i((()=>[j(c(v(S)("划转")),1)])),_:1}),w(d,{type:"primary",onClick:l[18]||(l[18]=e=>v(C).push("/recharge/"+(1==Ae.value?Qe.value.rightKey:Qe.value.leftKey)))},{default:i((()=>[j(c(v(S)("去充值")),1)])),_:1})])])])),_:1},8,["show"]),Pe.value?(n(),r(oe,{key:0,tabNav:[v(S)("自选"),v(S)("USDT")],onClose:Ie},null,8,["tabNav"])):B("",!0),Te.value?(n(),r(Se,{key:1,tabActive:Ae.value,"curr-pair":Qe.value,onClose:Ke},null,8,["tabActive","curr-pair"])):B("",!0)])):B("",!0)}}},[["__scopeId","data-v-59adeb2e"]]);export{Xl as default};
