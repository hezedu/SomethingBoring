import{a1 as e,aG as a,a5 as r,a2 as t,f as n,aV as i,h as l,a_ as o,a$ as u,aK as s,a as c,b0 as d,aM as m,a7 as v,b1 as g,b2 as b,b3 as f,b4 as p,a9 as h,ae as y,T as x,s as V}from"./index-CioBjTVG.js";const[P,N]=e("slider");const w=h(t({name:P,props:{min:a(0),max:a(100),step:a(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:r,buttonSize:r,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}},emits:["change","dragEnd","dragStart","update:modelValue"],setup(e,{emit:a,slots:r}){let t,h,y;const x=n(),V=[n(),n()],P=n(),w=i(),B=l((()=>Number(e.max)-Number(e.min))),S=l((()=>{const a=e.vertical?"width":"height";return{background:e.inactiveColor,[a]:o(e.barHeight)}})),C=a=>e.range&&Array.isArray(a),D=()=>{const{modelValue:a,min:r}=e;return C(a)?100*(a[1]-a[0])/B.value+"%":100*(a-Number(r))/B.value+"%"},M=l((()=>{const a=e.vertical?"height":"width",r={[a]:D(),background:e.activeColor};P.value&&(r.transition="none");return r[e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left"]=(()=>{const{modelValue:a,min:r}=e;return C(a)?100*(a[0]-Number(r))/B.value+"%":"0%"})(),r})),A=a=>{const r=+e.min,t=+e.max,n=+e.step;a=p(a,r,t);const i=Math.round((a-r)/n)*n;return b(r,i)},k=()=>{const a=e.modelValue;y=C(a)?a.map(A):A(a)},T=(r,t)=>{r=C(r)?(a=>{var r,t;const n=null!=(r=a[0])?r:Number(e.min),i=null!=(t=a[1])?t:Number(e.max);return n>i?[i,n]:[n,i]})(r).map(A):A(r),d(r,e.modelValue)||a("update:modelValue",r),t&&!d(r,y)&&a("change",r)},z=a=>{if(a.stopPropagation(),e.disabled||e.readonly)return;k();const{min:r,reverse:t,vertical:n,modelValue:i}=e,l=m(x),o=n?l.height:l.width,u=Number(r)+(n?t?l.bottom-a.clientY:a.clientY-l.top:t?l.right-a.clientX:a.clientX-l.left)/o*B.value;if(C(i)){const[e,a]=i;T(u<=(e+a)/2?[u,a]:[e,u],!0)}else T(u,!0)},E=r=>{if(e.disabled||e.readonly)return;"start"===P.value&&a("dragStart",r),v(r,!0),w.move(r),P.value="dragging";const n=m(x);let i=(e.vertical?w.deltaY.value:w.deltaX.value)/(e.vertical?n.height:n.width)*B.value;if(e.reverse&&(i=-i),C(y)){const a=e.reverse?1-t:t;h[a]=y[a]+i}else h=y+i;T(h)},R=r=>{e.disabled||e.readonly||("dragging"===P.value&&(T(h,!0),a("dragEnd",r)),P.value="")},X=a=>{if("number"==typeof a){return N("button-wrapper",["left","right"][a])}return N("button-wrapper",e.reverse?"left":"right")},Y=(a,n)=>{const i="dragging"===P.value;if("number"==typeof n){const e=r[0===n?"left-button":"right-button"];let l;if(i&&Array.isArray(h)&&(l=h[0]>h[1]?1^t:t),e)return e({value:a,dragging:i,dragIndex:l})}return r.button?r.button({value:a,dragging:i}):c("div",{class:N("button"),style:f(e.buttonSize)},null)},H=a=>{const r="number"==typeof a?e.modelValue[a]:e.modelValue;return c("div",{ref:V[null!=a?a:0],role:"slider",class:X(a),tabindex:e.disabled?void 0:0,"aria-valuemin":e.min,"aria-valuenow":r,"aria-valuemax":e.max,"aria-disabled":e.disabled||void 0,"aria-readonly":e.readonly||void 0,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstartPassive:r=>{"number"==typeof a&&(t=a),(a=>{e.disabled||e.readonly||(w.start(a),h=e.modelValue,k(),P.value="start")})(r)},onTouchend:R,onTouchcancel:R,onClick:g},[Y(r,a)])};return T(e.modelValue),u((()=>e.modelValue)),V.forEach((e=>{s("touchmove",E,{target:e})})),()=>c("div",{ref:x,style:S.value,class:N({vertical:e.vertical,disabled:e.disabled}),onClick:z},[c("div",{class:N("bar"),style:M.value},[e.range?[H(0),H(1)]:H()])])}})),{t:B}=y.global;function S(e,a,r,t){return e*a*r*t*2}function C(e,a){let r=function(e){let a=Number(e);return a=e<0?0:e,a}(a);return(e+1/Math.pow(10,r+1)*5).toFixed(r)}function D({piece:e,price:a,fairPriceLast:r,multiplier:t,leverage:n,feeRate:i,maxD:l}){let o=function(e,a,r,t,n){const i=function(e,a,r,t){return e*a*r/t}(e,a,t,n);return a>r?i+function(e,a,r,t){return(a-r)*e*t}(e,a,r,t):i}(e,a,r,t,n);return o+=S(e,a,t,i),C(o,l)}function M(e,a,r,t,n,i){const l=function(e,a,r,t,n){return e*Math.max(a,r)*t/n}(e,a,t,n,i);return a<r?l+function(e,a,r,t){return(r-a)*e*t}(e,a,r,n):l}function A({piece:e,price:a,fairPriceLast:r,discBestBuyPrice:t,multiplier:n,leverage:i,feeRate:l,maxD:o}){let u=M(e,a,r,t,n,i);return u+=S(e,a,n,l),C(u,o)}function k(e,a){return Math.floor(e/a)}function T({multiplier:e,pair:a},{entryPrice:r,closePrice:t,count:n,direction:i,leverage:l}){let o={margin:"",profit:"",rate:""},u=0;return u=1==i?t-r:r-t,u=x(u*n,6),o.profit=u,o.margin=x(r*n/l,6),o.rate=x(u/o.margin,2),o}function z({multiplier:e,pair:a},{entryPrice:r,realisedRate:t,direction:n,leverage:i}){let l=(r*=1)/i*t*.01,o="";return o=x(1==n?r+l:r-l,a.maxPriceDecimalDigit),o}function E({multiplier:e,pair:a},{entryPrice:r,count:t,positionMode:n,balance:i,direction:l,leverage:o}){let u=(r*=1)/o,s=u/2;if(u*t>i)return V(B("账号余额不满足此仓位最少起始保证金")),"--";let c=u-s;if(0==n){c+=(1*i-u*t)/t}let d="";return d=x(2==l?r+c:r-c,a.maxPriceDecimalDigit),console.log(d),d}export{w as S,z as a,E as b,T as c,C as d,k as e,A as f,D as g};
