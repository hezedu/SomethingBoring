import{aC as e,aD as t,aE as a,aF as s,a1 as o,a5 as i,au as n,aG as r,a2 as l,f,aH as u,r as d,h,aI as c,ar as v,aJ as p,w as x,aK as m,aL as g,ay as w,aM as b,aN as $,aO as y,a as I,aP as O,a9 as T}from"./index-CioBjTVG.js";function j(o,i){if(!e||!window.IntersectionObserver)return;const n=new IntersectionObserver((e=>{i(e[0].intersectionRatio>0)}),{root:document.body}),r=()=>{o.value&&n.unobserve(o.value)};t(r),a(r),s((()=>{o.value&&n.observe(o.value)}))}const[z,B]=o("sticky");const E=T(l({name:z,props:{zIndex:i,position:n("top"),container:Object,offsetTop:r(0),offsetBottom:r(0)},emits:["scroll","change"],setup(e,{emit:t,slots:a}){const s=f(),o=u(s),i=d({fixed:!1,width:0,height:0,transform:0}),n=f(!1),r=h((()=>c("top"===e.position?e.offsetTop:e.offsetBottom))),l=h((()=>{if(n.value)return;const{fixed:e,height:t,width:a}=i;return e?{width:`${a}px`,height:`${t}px`}:void 0})),T=h((()=>{if(!i.fixed||n.value)return;const t=v(p(e.zIndex),{width:`${i.width}px`,height:`${i.height}px`,[e.position]:`${r.value}px`});return i.transform&&(t.transform=`translate3d(0, ${i.transform}px, 0)`),t})),z=()=>{if(!s.value||g(s))return;const{container:a,position:o}=e,n=b(s),l=O(window);if(i.width=n.width,i.height=n.height,"top"===o)if(a){const e=b(a),t=e.bottom-r.value-i.height;i.fixed=r.value>n.top&&e.bottom>0,i.transform=t<0?t:0}else i.fixed=r.value>n.top;else{const{clientHeight:e}=document.documentElement;if(a){const t=b(a),s=e-t.top-r.value-i.height;i.fixed=e-r.value<n.bottom&&e>t.top,i.transform=s<0?-s:0}else i.fixed=e-r.value<n.bottom}(e=>{t("scroll",{scrollTop:e,isFixed:i.fixed})})(l)};return x((()=>i.fixed),(e=>t("change",e))),m("scroll",z,{target:o,passive:!0}),j(s,z),x([$,y],(()=>{s.value&&!g(s)&&i.fixed&&(n.value=!0,w((()=>{const e=b(s);i.width=e.width,i.height=e.height,n.value=!1})))})),()=>{var e;return I("div",{ref:s,style:l.value},[I("div",{class:B({fixed:i.fixed&&!n.value}),style:T.value},[null==(e=a.default)?void 0:e.call(a)])])}}}));export{E as S,j as u};
