import{u as e,r as o,f as l,k as t,w as s,o as a,c as i,a as n,z as r,F as m,B as u,l as c,p as d,s as p}from"./index-ZSwLI674.js";/* empty css              *//* empty css              *//* empty css              */import{u as g}from"./useCountDown-BDOyrk-B.js";import{_ as f}from"./index-MP83Mxf-.js";import{M as x}from"./MsgService-B21ojECZ.js";import{a as b,T as y}from"./index-C0sISGSw.js";import"./index-Cxe8Vk9V.js";import"./index-CqDlCCNj.js";import"./use-id-BUjKeJ2W.js";/* empty css                                              */import"./index-D9ybKy9M.js";import"./use-tab-status-yiZOeCkD.js";import"./index-DXU4Ikqf.js";import"./index-BpQst5nk.js";const h={class:"sms-googl-authority-wrapper"},v={__name:"index",props:{twiceParams:{type:Object,require:!0}},emits:["next"],setup(v,{emit:j}){const w=j,T=v.twiceParams,{t:V}=e(),C=o({}),_=l("mobile"),k=l({height:" 24px",lineHeight:"24px",fontSize:"16px",fontWeight:500,padding:"0 0 6px 0",marginRight:"24px"}),M=l(!0),F=l([{tabTitle:V("邮箱验证"),name:"mobile",children:[{componentType:"sms",type:"text",key:"sms",label:`${V("将发送验证码到")}${T.show}`,labelAlign:"top",placeholder:V("请输入验证码"),countDownData:g(),handlerCountdown:(e,o)=>{console.log("isMobile(email.value)",T.show),(async e=>{const o=await x.sendVerifyCode(T,T.ext);C[T.bizType]=o,console.log(C),e()})(e)},maxlength:6,rules:[{pattern:/^\d{6}$/,message:V("请输入6位数字验证码")}]}]},{tabTitle:V("Google验证"),name:"google",children:[{componentType:"input",type:"text",key:"googleSms",label:V("输入Google验证码"),labelAlign:"top",rightText:V("粘贴"),clickRightText:async e=>{const o=await t();console.log("key",o),z.formModelValues.googleSms=o},placeholder:V("请输入验证码"),rules:[{required:!0,message:V("请输入验证码")}]}]}]),S=e=>{switch(z.formModelValues[e.name]=null,M.value=!0,e.name){case"mobile":z.formModelValues.googleSms=null;break;case"google":z.formModelValues.sms=null}},z=o({formModelValues:{},submitText:"提交",submitDisabled:M,onSubmit:e=>{console.log(e),(async({sms:e,googleSms:o})=>{if(o)w("next",{result:{googleCode:o},fullAccount:T.fullAccount});else{const o=C[T.bizType];if(!o)return p(V("请先发送验证码")),!1;try{await x.checkVerifyCode({verifyCodeId:o,verifyCode:e,bizType:T.bizType}),w("next",{result:{verifyCodeId:o,verifyCode:e},fullAccount:T.fullAccount})}catch(l){}}})(e)},formConfigList:[]});return s((()=>z.formModelValues),(e=>{console.log("newFormData",e),(e=>{switch(_.value){case"mobile":M.value=!e.sms;break;case"google":M.value=!e.googleSms}})(e)}),{immediate:!0,deep:!0}),(e,o)=>{const l=b,t=y;return a(),i("div",h,[n(t,{active:_.value,"onUpdate:active":o[1]||(o[1]=e=>_.value=e),shrink:"","title-inactive-color":"#FFFFFF","title-active-color":"var(--basic---)",background:"var(--Misc-body-bg)",color:"var(--basic---)","line-width":"64px","line-height":"2px",onClickTab:S},{default:r((()=>[(a(!0),i(m,null,u(F.value,(e=>(a(),c(l,{title:e.tabTitle,name:e.name,key:e.name,"title-style":k.value},{default:r((()=>[n(f,d({modelValue:z.formModelValues,"onUpdate:modelValue":o[0]||(o[0]=e=>z.formModelValues=e),ref_for:!0},{...z,formConfigList:e.children}),null,16,["modelValue"])])),_:2},1032,["title","name","title-style"])))),128))])),_:1},8,["active"])])}}};export{v as default};
