import{f as t,j as e,ay as a,bc as o,w as n,aN as l,aO as s,aM as c,a as i,a1 as r,a2 as u,a3 as d,a6 as f,a9 as m,ar as g,az as B,aA as p,be as b,h,a4 as v,as as w,a5 as C,bl as y,au as x,av as k,r as S,c4 as T,p as D,aw as A,a_ as O,af as j,c5 as z,bj as H,c6 as N,c7 as E,bV as F}from"./index-CioBjTVG.js";import{B as I}from"./index-h3qOpuro.js";function M(r,u){const d=((i,r)=>{const u=t(),d=()=>{u.value=c(i).height};return e((()=>{a(d);for(let t=1;t<=3;t++)setTimeout(d,100*t)})),o((()=>a(d))),n([l,s],d),u})(r);return t=>i("div",{class:u("placeholder"),style:{height:d.value?`${d.value}px`:void 0}},[t()])}const[P,R]=r("action-bar"),K=Symbol(P);const L=m(u({name:P,props:{placeholder:Boolean,safeAreaInsetBottom:f},setup(e,{slots:a}){const o=t(),n=M(o,R),{linkChildren:l}=d(K);l();const s=()=>{var t;return i("div",{ref:o,class:[R(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==(t=a.default)?void 0:t.call(a)])};return()=>e.placeholder?n(s):s()}})),[U,V]=r("action-bar-button");const $=m(u({name:U,props:g({},B,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(t,{slots:e}){const a=p(),{parent:o,index:n}=b(K),l=h((()=>{if(o){const t=o.children[n.value-1];return!(t&&"isButton"in t)}})),s=h((()=>{if(o){const t=o.children[n.value+1];return!(t&&"isButton"in t)}}));return v({isButton:!0}),()=>{const{type:o,icon:n,text:c,color:r,loading:u,disabled:d}=t;return i(I,{class:V([o,{last:s.value,first:l.value}]),size:"large",type:o,icon:n,color:r,loading:u,disabled:d,onClick:a},{default:()=>[e.default?e.default():c]})}}})),[_,q,G]=r("dialog"),J=g({},w,{title:String,theme:String,width:C,message:[String,Function],callback:Function,allowHtml:Boolean,className:y,transition:x("van-dialog-bounce"),messageAlign:String,closeOnPopstate:f,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:f,closeOnClickOverlay:Boolean}),Q=[...k,"transition","closeOnPopstate"];const W=m(u({name:_,props:J,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:a,slots:o}){const n=t(),l=S({confirm:!1,cancel:!1}),s=t=>a("update:show",t),c=t=>{var a;s(!1),null==(a=e.callback)||a.call(e,t)},r=t=>()=>{e.show&&(a(t),e.beforeClose?(l[t]=!0,F(e.beforeClose,{args:[t],done(){c(t),l[t]=!1},canceled(){l[t]=!1}})):c(t))},u=r("cancel"),d=r("confirm"),f=T((t=>{var o,l;if(t.target!==(null==(l=null==(o=n.value)?void 0:o.popupRef)?void 0:l.value))return;({Enter:e.showConfirmButton?d:z,Escape:e.showCancelButton?u:z})[t.key](),a("keydown",t)}),["enter","esc"]),m=()=>{const t=o.title?o.title():e.title;if(t)return i("div",{class:q("header",{isolated:!e.message&&!o.default})},[t])},g=t=>{const{message:a,allowHtml:o,messageAlign:n}=e,l=q("message",{"has-title":t,[n]:n}),s=H(a)?a():a;return o&&"string"==typeof s?i("div",{class:l,innerHTML:s},null):i("div",{class:l},[s])},B=()=>{if(o.default)return i("div",{class:q("content")},[o.default()]);const{title:t,message:a,allowHtml:n}=e;if(a){const e=!(!t&&!o.title);return i("div",{key:n?1:0,class:q("content",{isolated:!e})},[g(e)])}},p=()=>o.footer?o.footer():"round-button"===e.theme?i(L,{class:q("footer")},{default:()=>[e.showCancelButton&&i($,{type:"warning",text:e.cancelButtonText||G("cancel"),class:q("cancel"),color:e.cancelButtonColor,loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:u},null),e.showConfirmButton&&i($,{type:"danger",text:e.confirmButtonText||G("confirm"),class:q("confirm"),color:e.confirmButtonColor,loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:d},null)]}):i("div",{class:[E,q("footer")]},[e.showCancelButton&&i(I,{size:"large",text:e.cancelButtonText||G("cancel"),class:q("cancel"),style:{color:e.cancelButtonColor},loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:u},null),e.showConfirmButton&&i(I,{size:"large",text:e.confirmButtonText||G("confirm"),class:[q("confirm"),{[N]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:d},null)]);return()=>{const{width:t,title:a,theme:o,message:l,className:c}=e;return i(j,D({ref:n,role:"dialog",class:[q([o]),c],style:{width:O(t)},tabindex:0,"aria-labelledby":a||l,onKeydown:f,"onUpdate:show":s},A(e,Q)),{default:()=>[m(),B(),p()]})}}}));export{W as D};
