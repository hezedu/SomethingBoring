import{_ as e,f as a,u as l,w as i,o as t,l as n,z as s,af as o,b as d,C as c,m as u,a as r,bt as m,c as p,B as A,F as g,G as v,n as f,E as k,r as h,s as w,bf as y,t as C,j as I}from"./index-ZSwLI674.js";import{B as b}from"./index-Cxe8Vk9V.js";/* empty css              */import{_ as x}from"./headItem-BRJ0w2uz.js";import{I as E,P as V,A as R,N as U,M as B,V as T,a as j,b as S,Q as D}from"./icon_copy_dark-CgYId1_K.js";import{F as _}from"./index-CqDlCCNj.js";import{u as L}from"./index-DmsxG6nZ.js";import{S as N}from"./index-BpQst5nk.js";import"./index-BcALmiiH.js";import"./index-MP83Mxf-.js";/* empty css                                              */import"./index-D9ybKy9M.js";import"./use-id-BUjKeJ2W.js";const O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAl9JREFUSEu9lr9v00Acxd/XyRBVIDEyIAGCgUrwPzAwMLYTSOlQxILEQFHzU5TknFRy4lhqhg5sdGikdqJslWBgZAeJDkiAQIKdBIxi3xedY6dOajsJqbjNvrv3Od+7+z4TElrdNK/A5SWGdhvE1wA6DyAN4AcY7wl448LpiHL5c5wMRXVsWtZF6UgB0IovmLQOAHygpbW1jVzuy/jAEwC9aWUh+RkRzkxQHe1mthlYrZYL++GOEUC92aoyQ8wkPDaYCOJpMa8Hr4cA3TDvENHePOLBXCa5Ui0WO+rZA3h73pdHIMqcCoDRZTg3lPkeoNYwXwC0dBrixxq8UykV7pEwjEsapT/NK87gtwTqArg10GJHsrtIdaP1hAmbcwEYh/JPbxmAo2UWfgKDrWamHNUarVfH1H/A+OJCCLtuWOtMbA1VGK8V4DsAdUP9L8M2COcAqEuW3MLiDfMRg9rhCQz+pgAcMsaW9q+zQgin1mhtAViLJUwQD3ygWsPsA6TqS9DalVL+8eB0xUCmEh/IKcBXgC6MrTQeMoO4KopJJp+EzCYOKJN1w1qnsPOjnzKE6M3Wff7d63inJcLQKK+YsKEu2lWNUh/GfAiPH0LUy2nF1VjJzmW/VFjPAV5NOJNtaffyqczCw/GjGD+HDyqlwrIHUOWCkH6XmAGMLqbNCGZbwl0cFjsF0ZvNLLG2O+luTdPPzHeD4Pl/gROszAseYGfWbGC1hRo9qBZzXtAELTL0ByU8tTVlRjgA7Uru61F/F5GAgK5AKaSzDNwE4bpfFB3/t+WIIA9dyJeiXP4Y581fy/08UksfCaoAAAAASUVORK5CYII=",W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIeSURBVHgBrZVBUtswFIbfe8YeAhkm3MA3aFmUya5wgtITNDlBk9BFd5BdFxjcE2BOUPcETXcJXbQ9AeYEZDqFMB6sh54cIHYwxAn/TGZkSe/7n6QnBeEJbbUualfkfETkLQB0dZf8gIGHCPAn4eT7klJh31+Pihj4WGe9deEqyznSgzswixgCVHH3MaMpg/ru6IOCxEfAGpQQAwyZk/avw7Vgsp8y8E+jPQYVlIWPM60RWsebncu9XH+qN51/DZkALyAEavS9yknahrs9t3/Pk/kDFXvAUgzpdlESb8iZmC1SaO8vAtdVdTI4WNlG5uY465oUiWlL9mw5ZzCnBH7qVRvSNixyfmgHV74rSbxOTPZspVgSLrqipRYB0juYQ8/BRYj4lvTE19lQjHT410Xh6UR0SQ5kEo42bg+8agsRugvBDQ5cykbrAru+Ns3+wep+3qQUfCxtwOeTjhIkwXmTeeDmPmiPs/yy8iYMyfuy8NRB/SX9FP+cGsiZnHprYWm4wWBIyzexXzCaMSkLNwjHCs1btLl7+a3w7WeIEqWaFtFxGbhWMPBWm6aKyKa2HAgUrMSyqFTmwkKbTHEYg/6XSkTMbXghCUuY9wbG5LAaFF2uMmJWXWHdfU//ZXb+NxTiUfaGzwCWmpfMJ+Aiyk+UCfpMNuRiwezwUGLycBE+FVj/PHI5TnZYKgzx1cOq+Fy/KhER9pZvVvyej8Mixi2H0xF0rEDPdAAAAABJRU5ErkJggg==",H={class:"add-link-dialog-wrapper"},P={class:"add-link-dialog-head flex align-center justify-center"},Y={class:"text"},M={class:"close-button-wrapper"},F={class:"add-link-dialog-content"},z={class:"my-rate"},G={class:"friend-rate"},Q={class:"text"},q={class:"rate-list"},J=["onClick"],K={class:"invite-link-remark"},X={class:"text"},Z={class:"set-deafult-link flex align-center"},$={class:"create-tip"},ee=e({__name:"addLinkDialog",props:{modelValue:{type:Boolean},remark:{type:String},maxRebateRate:{type:String}},emits:["update:modelValue","onSubmit"],setup(e,{emit:C}){const I=C,x=e,U=a(!1),{t:B}=l(),T=a([0,.05,.1,.15,.2,.25]),j=a(0),S=a(!1),D=a(),L=()=>{console.log("showRight"),U.value=!1,I("update:modelValue",!1)},N=async()=>{await R.addInviteLink(h({remark:D,isDefault:S,rebateRatio:x.maxRebateRate,cashbackRatio:j})),w(B("新增邀请链接成功")),I("onSubmit"),L()};return i((()=>x.modelValue),(e=>{U.value=e,I("update:modelValue",e)}),{immediate:!0,deep:!0}),(e,a)=>{const l=_,i=y,h=b,w=o;return t(),n(w,{show:U.value,"onUpdate:show":a[2]||(a[2]=e=>U.value=e),overlay:!0,"lock-scroll":!1,onClose:L,duration:.1,position:"bottom",style:{width:"100%",height:"508px"}},{default:s((()=>[d("div",H,[d("div",P,[d("span",Y,c(u(B)("新增邀请链接")),1),d("p",M,[r(V,{iconImg:u(E),width:.64,height:.64,onClick:L},null,8,["iconImg"])])]),d("div",F,[d("p",z,[d("span",null,c(u(B)("我的返佣比例")),1),d("span",null,c(u(m)(x.maxRebateRate,0,!1)),1)]),d("div",G,[d("span",Q,c(u(B)("好友返现比例")),1),d("ul",q,[(t(!0),p(g,null,A(T.value,((e,a)=>(t(),p(g,{key:a},[e<x.maxRebateRate?(t(),p("li",{key:0,class:v([e===j.value?"activite":""]),onClick:a=>j.value=e},c(u(m)(e,0,!1)),11,J)):f("",!0)],64)))),128))])]),d("div",K,[d("span",X,c(u(B)("邀请链接备注")),1),r(i,{inset:""},{default:s((()=>[r(l,{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),placeholder:u(B)("请设置备注信息，最多20个字符"),maxlength:"20"},null,8,["modelValue","placeholder"])])),_:1}),d("div",Z,[d("div",{class:"set-deafult-link-icon-wrapper flex align-center",onClick:a[1]||(a[1]=e=>S.value=!S.value)},[S.value?f("",!0):(t(),n(V,{key:0,iconImg:u(O),width:.32,height:.32},null,8,["iconImg"])),S.value?(t(),n(V,{key:1,iconImg:u(W),width:.32,height:.32},null,8,["iconImg"])):f("",!0)]),d("span",null,c(u(B)("设为默认链接")),1)])]),d("div",$,c(u(B)("创建以后不支持删除，只能修改备注")),1),r(h,{block:"",type:"primary",class:"submit-add-button",onClick:N},{default:s((()=>[k(c(u(B)("确认")),1)])),_:1})])])])),_:1},8,["show"])}}},[["__scopeId","data-v-f982ec61"]]);var ae={VITE_OPENAPI:"https://app.fitget.pro",VITE_VERSION:"v1",VITE_FALLBACK_LANG:"zh",VITE_SIGNATURE_KEY:"4b424e19fd7287dc2378271f985bd0b8",VITE_WEBSOCKET_MQTT_URL:"wss://dapp.fitget.pro/mqtt",VITE_MERCHANT_ID:"1",VITE_FUSION_PROD_ID:"5",BASE_URL:"/SomethingBoring/tmp/fitget",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const le={class:"add-invite-link-wrapper"},ie={class:"add-invite-link-num-tip"},te={class:"num"},ne={class:"invite-link-item-wrapper"},se={class:"invite-link-item-head flex justify-between align-center"},oe={class:"remark"},de={class:"invite-friend-content-bottom flex"},ce={class:"invite-friend-content-bottom-item"},ue={class:"number"},re={class:"text"},me={class:"invite-friend-content-bottom-item friend-refound"},pe={class:"number"},Ae={class:"text"},ge={class:"invite-friend-content-bottom-item"},ve={class:"number"},fe={class:"text"},ke={class:"invite-friend-content-top"},he={class:"invite-friend-item flex align-center justify-between"},we={class:"left"},ye={class:"right flex align-center justify-center"},Ce={class:"right-info"},Ie={class:"invite-friend-item flex align-center justify-between"},be={class:"left"},xe={class:"right flex align-center justify-center"},Ee={class:"right-info invite-link-wrapper"},Ve={class:"invite-friend-wrapper flex"},Re=["onClick"],Ue={class:"set-deafult-link flex align-center"},Be=["onClick"],Te={__name:"index",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:o}){const{t:v}=l(),{toClipboard:y}=L(),E=C(),{VITE_INVITE_URL:_}=ae,H=o,P=e,Y=a([]),M=new U,F=a(!1),z=a(!1),G=a(!1);a(!1);const Q=a(!1),q=a(),J=a(1),K=a(20),X=a(null),Z=()=>{E.push({name:"userCenterInvitationToRefund"})},$=async e=>{try{await y(e),w(v("已复制到粘贴板"))}catch(a){console.error(a)}},Te=e=>{Se()},je=e=>{G.value=!1,Se()};i((()=>P.modelValue),(e=>{F.value=e,H("update:modelValue",e)}),{immediate:!0,deep:!0});const Se=async()=>{const{list:e}=await R.getInviteConfig(h({pageNum:J,pageSize:K}));e.forEach((e=>{e.url=_+"?inviteCode="+e.inviteCode})),Y.value=e};return I((()=>{Se(),(async()=>{const e=await R.getRebateRatio();q.value=e})()})),(e,a)=>{const l=x,i=N,o=b;return t(),p(g,null,[d("div",le,[r(i,null,{default:s((()=>[r(l,{headTt:u(v)("管理邀请链接"),goBack:Z},{default:s((()=>[Y.value.length<20?(t(),p("span",{key:0,class:"add-link",onClick:a[0]||(a[0]=e=>z.value=!0)},c(u(v)("添加")),1)):f("",!0)])),_:1},8,["headTt"])])),_:1}),d("p",ie,[k(c(u(v)("已创建")),1),d("span",te,c(Y.value.length),1),k(c(u(v)("个邀请链接，最多创建20个邀请链接")),1)]),d("ul",ne,[(t(!0),p(g,null,A(Y.value,((a,l)=>(t(),p("li",{key:a.id,class:"invite-link-item"},[d("div",se,[d("span",oe,c(a.remark),1),r(V,{iconImg:u(j),width:.64,height:.64,onClick:()=>((e,a)=>{X.value=e,G.value=!0})(a)},null,8,["iconImg","onClick"])]),d("ul",de,[d("li",ce,[d("span",ue,c(u(m)(a.rebateRatio,0,!1)),1),d("span",re,c(u(v)("我的返佣比例")),1)]),d("li",me,[d("span",pe,c(u(m)(a.cashbackRatio,0,!1)),1),d("span",Ae,c(u(v)("好友返现比例")),1)]),d("li",ge,[d("span",ve,c(a.inviteCount),1),d("span",fe,c(u(v)("已邀请好友")),1)])]),d("div",ke,[d("div",he,[d("p",we,c(u(v)("邀请"))+"ID",1),d("p",ye,[d("span",Ce,c(a.inviteCode),1),r(V,{iconImg:u(S),width:.64,height:.64,onClick:()=>$(a.inviteCode)},null,8,["iconImg","onClick"])])]),d("div",Ie,[d("p",be,c(u(v)("邀请链接")),1),d("p",xe,[d("span",Ee,c(a.url),1),r(V,{iconImg:u(S),width:.64,height:.64,onClick:()=>$(a.url)},null,8,["iconImg","onClick"])])])]),d("div",Ve,[r(o,{block:"",type:"primary",class:"invite-friend-button",onClick:e=>(({url:e})=>{M.setShareData({title:e});try{M.call()}catch(a){console.log(a)}})(a)},{default:s((()=>[k(c(u(v)("邀请好友")),1)])),_:2},1032,["onClick"]),d("div",{class:"qr-code-wrapper",onClick:()=>((e,a)=>{X.value=e,Q.value=!0})(a)},[r(D,{value:a.url,size:50,level:e.L},null,8,["value","level"])],8,Re)]),d("div",Ue,[d("div",{class:"set-deafult-link-icon-wrapper flex align-center",onClick:e=>(async e=>{if(e.isDefault)return!1;await R.updateSetDefault({id:e.id,isDefault:!0}),w(v("设置成功")),Se()})(a)},[a.isDefault?f("",!0):(t(),n(V,{key:0,iconImg:u(O),width:.32,height:.32},null,8,["iconImg"])),a.isDefault?(t(),n(V,{key:1,iconImg:u(W),width:.32,height:.32},null,8,["iconImg"])):f("",!0)],8,Be),d("span",null,c(u(v)("设为默认链接")),1)])])))),128))])]),r(ee,{modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e),maxRebateRate:q.value,onOnSubmit:Te},null,8,["modelValue","maxRebateRate"]),X.value?(t(),n(B,{key:0,modelValue:G.value,"onUpdate:modelValue":a[2]||(a[2]=e=>G.value=e),onOnSubmit:je,link:X.value},null,8,["modelValue","link"])):f("",!0),X.value?(t(),n(T,{key:1,modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=e=>Q.value=e),"invite-code":X.value.inviteCode,qrCode:X.value.url},null,8,["modelValue","invite-code","qrCode"])):f("",!0)],64)}}};export{Te as default};
