import{_ as e,t as a,u as o,f as l,r as s,w as t,o as i,c as r,a as n,m as d,b as m,C as u,z as p,l as c,U as v,F as g,B as f,p as y}from"./index-ZSwLI674.js";/* empty css              *//* empty css              *//* empty css              */import{_}from"./headItem-BRJ0w2uz.js";/* empty css                                                              */import{_ as h}from"./chooseCountry.vue_vue_type_style_index_0_lang-Dd6ON4BW.js";import{_ as b}from"./index-MP83Mxf-.js";import{B as x,A as w}from"./bizType-DoDjwnwK.js";import{v as j,a as T,b as k}from"./validators-D3H_ul3D.js";import{T as V,a as C}from"./index-C0sISGSw.js";import"./index-Cxe8Vk9V.js";import"./index-CqDlCCNj.js";import"./use-id-BUjKeJ2W.js";/* empty css                                              */import"./index-D9ybKy9M.js";import"./use-tab-status-yiZOeCkD.js";import"./index-DXU4Ikqf.js";import"./index-BpQst5nk.js";const B={key:0,class:"forget-pwd-wrapper"},F={class:"reset-tip"},P={class:"forget-pwd-content"},M=e({__name:"index",setup(e){const M=a(),{t:z}=o(),D=l({height:" 24px",lineHeight:"24px",fontSize:"16px",fontWeight:500,padding:"0 0 6px 0",marginRight:"24px"}),E=l("email"),U=l(),q=l(""),O=l(!1),R=l(!0),A=l(null),G=s({bizType:x.FORGET_PWD,email:"",ga:"",phone:"",verifyEmail:!1,verifyGa:!1,verifyPhone:!1}),I=l([{tabTitle:z("邮箱找回"),name:"email",children:[{componentType:"input",type:"text",key:"email",placeholder:z("请输入邮箱"),rules:[{required:!0,message:z("请输入邮箱")},{validator:j,trigger:["onBlur"]}]},{componentType:"password",type:"password",key:"password",placeholder:z("请输入密码"),rules:[{required:!0,message:z("请填写密码")},{validator:T,trigger:["onBlur"]}]}]},{tabTitle:z("手机找回"),name:"mobile",children:[{componentType:"input",type:"text",key:"mobile",areaCode:q,leftIcon:"left-icon",placeholder:z("请输入手机号"),onChooseCountry:()=>{O.value=!0},rules:[{required:!0,message:z("请输入手机号")},{validator:k,trigger:["onBlur"]}]},{componentType:"password",type:"password",key:"password",placeholder:z("请输入密码"),rules:[{required:!0,message:z("请输入密码")},{validator:T,trigger:["onBlur"]}]}]}]),W=e=>{S.formModelValues[e.name]=null,R.value=!0;const a=Object.keys(S.formModelValues);switch(e.name){case"email":case"mobile":a.forEach((e=>{S.formModelValues[e]=null}))}},L=async({fullAccount:e,result:a})=>{const o=A.value;a.areaCode=o.areaCode,a.newPassword=o.loginPwd,a.mobileOrEmail=o.fullAccount;let l=!1;try{console.log("forget pwd ",e),console.log(a),l=await v.resetPassword(a)}catch(s){console.error("forget pwd error",s)}l&&M.push("/login")},S=s({formModelValues:{},submitText:z("下一步"),submitDisabled:R,onSubmit:e=>{console.log(e);const{mobile:a,email:o,password:l}=S.formModelValues,s=a?"phone":"email",t="phone"===s?a:o;console.log("register account",t),A.value={account:t,accountType:s,areaCode:q.value,loginPwd:l,bizType:x.FORGET_PWD,ext:{...G}},console.log("twiceParams",A)},formConfigList:[]}),H=e=>{U.value=e.icon,q.value=e.countryCode};return t((()=>S.formModelValues),(e=>{console.log("newFormData",e),(e=>{switch(E.value){case"email":R.value=!(e.email&&e.password);break;case"mobile":R.value=!(e.mobile&&e.password)}})(e)}),{immediate:!0,deep:!0}),(e,a)=>{const o=C,l=V;return A.value?(i(),c(w,{key:1,twiceParams:A.value,onNext:L,onBack:a[3]||(a[3]=e=>A.value=null)},null,8,["twiceParams"])):(i(),r("div",B,[n(_,{headTt:d(z)("重置密码"),goBack:e.goBack},null,8,["headTt","goBack"]),m("div",F,u(d(z)("为了您的账户安全，更改安全项目后，24小时内不可提现")),1),m("div",P,[n(l,{active:E.value,"onUpdate:active":a[1]||(a[1]=e=>E.value=e),shrink:"","title-inactive-color":"#FFFFFF","title-active-color":"var(--basic---)",background:"var(--Misc-body-bg)",color:"var(--basic---)","line-width":"64px","line-height":"2px",onClickTab:W},{default:p((()=>[(i(!0),r(g,null,f(I.value,(e=>(i(),c(o,{title:e.tabTitle,name:e.name,key:e.name,"title-style":D.value},{default:p((()=>[n(b,y({modelValue:S.formModelValues,"onUpdate:modelValue":a[0]||(a[0]=e=>S.formModelValues=e),ref_for:!0},{...S,formConfigList:e.children}),null,16,["modelValue"])])),_:2},1032,["title","name","title-style"])))),128))])),_:1},8,["active"])]),n(h,{modelValue:O.value,"onUpdate:modelValue":a[2]||(a[2]=e=>O.value=e),onChoose:H},null,8,["modelValue"])]))}}},[["__scopeId","data-v-4a06a014"]]);export{M as default};
