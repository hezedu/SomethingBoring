import{_ as e,f as a,j as l,o as t,c as s,a as i,z as o,l as n,ag as r,r as u,af as d,b as p,m as A,n as c,C as m,F as v,B as g,P as f,E as y,aZ as w}from"./index-CioBjTVG.js";import{B as h}from"./index-h3qOpuro.js";import{P as x}from"./index-DGm_PHVF.js";import{L as B}from"./index-sH_irN8F.js";/* empty css              */import{_}from"./headItem-Cz9qCjk4.js";import{I as j}from"./icon_notice-BvPW9oQ4.js";import{E as k}from"./emptyPage-Ds2BKBqQ.js";import{_ as C}from"./detail.vue_vue_type_style_index_0_lang-BtQ0sFcJ.js";import{S as I}from"./index-Bde3MoM6.js";import"./use-tab-status-_iNRjcO8.js";const R={class:"notice-wrapper"},V={key:0,class:"icon-wrapper"},U=["src"],S={key:1,class:"text"},T={key:0,class:"notice-list-wrapper"},b=["onClick"],F={class:"notice-list-item-left"},E={class:"icon-wrapper"},G={key:0,class:"point"},H=["src"],J={class:"notice-list-item-right"},W={class:"title-wraper"},X={class:"content-wraper"},Y={class:"date-wraper"},Q={class:"flex button-wrapper justify-center"},N=e({__name:"list",setup(e){const N=a(!1),z=a([]),D=a(!1),K=a(!1),L=a(!1),M=a(1),P=a(10),O=a(!1),Z=a({}),$=a(!1),q=()=>{N.value=!N.value,$.value=!$.value},ee=async()=>{L.value&&(z.value=[],L.value=!1);let{list:e}=await r.noticeList(u({pageNum:M,pageSize:P}));z.value=[].concat(z.value,e),D.value=!1,e.length<10&&(K.value=!0)},ae=()=>{K.value=!1,D.value=!0,ee()},le=async()=>{let e=z.value.map((e=>e.id));await r.deleteNotice(e),ae()},te=async()=>{let e=z.value.map((e=>e.id));await r.toggleNotice(e),ae()};return l((()=>{ee()})),(e,a)=>{const l=_,r=I,u=w,M=B,P=x,se=h,ie=d;return t(),s("div",R,[i(r,null,{default:o((()=>[i(l,{headTt:e.$t("通知")},{default:o((()=>[p("p",{class:"flex",onClick:q},[N.value?c("",!0):(t(),s("span",V,[p("img",{src:A("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFVSURBVHgB7ZixTQMxFIZ/myi0jHBMwAowASvgjgIhBkDCYQHgWoqICWCDrMAoKVGKGD/kK7AgDr5n35G8rzpbLr5PsnWWAUEQBGGfUakF13dzhwFpZ2ajo8Y/RwKGRgIyWIKRugEOL1rh2H+9g4l6AV6+vTcXj9YsfcQZmCLqBAT5bsgZUSVgpWHjOa6IKgFTh8WlnTfxPEdEuQC/bfxFZRZGTSLCIJMyAWHPt9bYVMSNH68dXpEJf0B0YDdFBPkFzSMT3oBIvuOniKvb59O+8gRfwC/yHXGEPpj0lid4AhLyHV8Rzj2Bkf4BW8oTtOeh1DkY6RfwR3mOPR+THzACeSIvYCTyRFbASn/YbdaVlieKXSVqyBNFAmrJE+wBNeUJ1oDa8sQEGUzXhyf+LtN8n1VHXv4BFeWJrAD/N33zdxmMAXkXGhoJGJrkSQwvaYIgCMJu8gnw8p4iBdg8OgAAAABJRU5ErkJggg==")},null,8,U)])),N.value?(t(),s("span",S,m(e.$t("完成")),1)):c("",!0)])])),_:1},8,["headTt"])])),_:1}),z.value.length>0?(t(),s("div",T,[i(P,{modelValue:L.value,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value=e),onRefresh:ae},{default:o((()=>[i(M,{loading:D.value,"onUpdate:loading":a[0]||(a[0]=e=>D.value=e),finished:K.value,"finished-text":e.$t("没有更多了"),onLoad:ee},{default:o((()=>[(t(!0),s(v,null,g(z.value,(e=>(t(),n(u,{key:e},{title:o((()=>[p("div",{class:"notice-list-item flex align-start",onClick:()=>(e=>{O.value=!0,Z.value=e,e.read=!0})(e)},[p("p",F,[p("span",E,[e.read?c("",!0):(t(),s("span",G)),p("img",{src:A(j)},null,8,H)])]),p("div",J,[p("p",W,m(e.title),1),p("p",X,m(e.content),1),p("p",Y,m(A(f)(e.createTime)),1)])],8,b)])),_:2},1024)))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])])):(t(),n(k,{key:1,text:e.$t("暂无记录")},null,8,["text"])),i(C,{modelValue:O.value,"onUpdate:modelValue":a[2]||(a[2]=e=>O.value=e),detailInfo:Z.value},null,8,["modelValue","detailInfo"]),i(ie,{show:$.value,"onUpdate:show":a[3]||(a[3]=e=>$.value=e),closeable:!1,position:"bottom",overlay:!1,duration:.1,style:{height:"110px"}},{default:o((()=>[p("div",Q,[i(se,{type:"primary",class:"read-all",onClick:te},{default:o((()=>[y(m(e.$t("全部已读")),1)])),_:1}),i(se,{type:"primary",onClick:le},{default:o((()=>[y(m(e.$t("清除全部")),1)])),_:1})])])),_:1},8,["show"])])}}},[["__scopeId","data-v-6caec419"]]);export{N as default};
