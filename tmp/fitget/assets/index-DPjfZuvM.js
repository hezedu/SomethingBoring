import{_ as a,f as e,h as l,j as t,ay as s,o as A,c as o,b as n,F as u,B as c,G as r,a as i,z as d,C as v,J as m,K as p,u as C,n as g,m as b,bt as B,E as I,r as x,l as E,ao as Q,af as V,x as f,t as y,R as h}from"./index-CioBjTVG.js";import{D as k}from"./index-BolVOxYO.js";import{B as T}from"./index-h3qOpuro.js";/* empty css              *//* empty css              *//* empty css              */import{_ as w}from"./headItem-Cz9qCjk4.js";import{A as _}from"./index-DdCt_D9c.js";import{F as S}from"./index-C9iF-GfQ.js";import{_ as K}from"./icon_tips_grey@2x-LOurmeOe.js";import{S as j,c as R,a as U,b as D}from"./contract-Da1xF4qy.js";import{S as N}from"./index-DXNav8J_.js";import{_ as J}from"./icon_navbar_close_nor@2x-cBiUEbVd.js";import{T as F,a as Y}from"./index-Onjf-qgk.js";import"./use-id-CcbAo3SX.js";import"./use-tab-status-_iNRjcO8.js";import"./index-DcdjDLdy.js";import"./index-Bde3MoM6.js";const q={class:"slideWrap"},M={class:"slideItem"},P=["id"],L=[(a=>(m("data-v-4197f5bb"),a=a(),p(),a))((()=>n("span",{class:"round"},null,-1)))],X={class:"pop"},G={class:"rightCol"},H=a({__name:"slideItem",props:["stepNum","max","modelValue"],emits:["update:modelValue"],setup(a,{emit:m}){const p=a,C=e(!1),g=m,b=l({get:()=>p.modelValue,set(a){g("update:modelValue",a)}}),B=a=>{console.log(a)},I=()=>{C.value=!0},x=()=>{C.value=!1},E=e((new Date).getTime());return t((()=>{s((()=>{const a=document.getElementById(`vanSlider${E.value}`).getElementsByClassName("van-slider__bar")[0],e=document.getElementById(`circleList${E.value}`);a.appendChild(e),e.style.cssText="display:flex;"}))})),(a,e)=>{const l=j;return A(),o("div",q,[n("div",M,[n("ul",{id:`circleList${E.value}`,class:"circleList"},[(A(!0),o(u,null,c(p.stepNum,(a=>(A(),o("li",{key:`circle${a}`,class:r(""+(b.value/(1*p.max/(p.stepNum-1))>=a-1?"active":""))},L,2)))),128))],8,P),i(l,{id:`vanSlider${E.value}`,min:"1",max:p.max,step:"1",modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),onChange:B,onDragStart:I,onDragEnd:x},{button:d((()=>[n("div",{ref:"cusBtn",class:r("custom-button "+(0==b.value?"blackBtn":""))},[n("span",X,v(b.value)+"x ",1)],2)])),_:1},8,["id","max","modelValue"])]),n("div",G,[n("img",{onClick:e[1]||(e[1]=a=>!(b.value>1)||b.value--),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAAAmElEQVR4Ae3SMQrAMAgAwDR/LmTqkCmQRzdPEDch56qCnrYmCBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgcKnAk917rv1neyrVf+NN7dwrDV9xFkDBVQABCgSCtA8KgKQJECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBwrcABXwcEDIPgRfcAAAAASUVORK5CYII="}),n("img",{onClick:e[2]||(e[2]=a=>!(b.value<p.max)||b.value++),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAABuElEQVR4Ae3bMU4DMRCFYTtC3IGCgoobbcktUFKlSAXiFpR7IyoKCu5AgVmvlGgJQx5jKV4v+lMlfpvY/jJJpLESAjcEEEAAAQQQQAABBBBAAIHaArH2hNZ8fd9fvry+7UJKd2Me4/PtzfW267oP6/qaYxc1J/ttroyT0uf6kKe0Hsbyw81hbKY7q5nm/T7tvnKmo9bYNK90vwmgFNLV8X6tseNrajxuAqjGRkvnAEjIAQSQEBAxFQSQEBAxFQSQEBAxFQSQEBAxFQSQEBAxFQSQEBAxFQSQEBAxFSSA3E37aYO9la6f2GOIIb6HwoMAd9P+R4Ndra6BfHwjCw8C/B+xRprpRe4Fa/cDFa1suU/yAw2f5cVut2DtbqB84hnj6nH84luIVF5rXnNeu3fJ7l8x7wR/uX738JSs67ab+9nX564gayP/eQwg8e4CBJAQEDEVBJAQEDEVBJAQEDEVBJAQEDEVBJAQEDEVBJAQEDEVBJAQEDEVtAQgq31rjYm9nCVuo4KsZro1dhaC0y/qPjg8/XJlaW6mj//u2Z9bDTglDfay2XkWAggggAACCCCAAAIIIIBAawJf+gJVvsTA0bQAAAAASUVORK5CYII="})])])}}},[["__scopeId","data-v-4197f5bb"]]),O={key:0,class:"topSelects"},W={class:"tabBar"},$=["onClick"],Z={class:"formList"},z={class:"label"},aa={class:"item"},ea={class:"rightTips"},la={class:"label"},ta={class:"item"},sa={class:"rightTips"},Aa={class:"label"},oa={class:"item"},na=(a=>(m("data-v-7a430a69"),a=a(),p(),a))((()=>n("div",{class:"rightTips"},[n("span",null,"%")],-1))),ua={class:"label"},ca={class:"item"},ra={class:"rightTips"},ia={class:"label"},da={class:"item"},va={class:"rightTips"},ma={class:"downInfo"},pa={class:"bigTittle"},Ca={class:"midRowList"},ga={class:"unit"},ba={class:"unit"},Ba={class:"unit"},Ia={key:1},xa={class:"unit"},Ea={key:2},Qa={class:"unit"},Va={key:0,class:"sRow"},fa={class:"sRow"},ya={class:"btnRow"},ha=a({__name:"tabContent",props:["outTabIdx","currContract"],emits:["showTip"],setup(a,{emit:t}){e("");const s=e(1),{t:m}=C(),p=[{label:m("做多"),value:1},{label:m("做空"),value:2}],E=a,Q=e(20),V=e(0),f=e(),y=e(),h=e(),k=e(),w=e(),j=e({margin:"--",profit:"--",rate:"--"}),N=e("--"),J=e("--"),F=t,Y=e(!1),q=[{name:m("全仓")},{name:m("逐仓")}],M=()=>{Y.value=!0},P=l((()=>{let a=E.outTabIdx;if(0==a){if(f.value&&y.value&&h.value)return!1}else if(1==a){if(f.value&&w.value)return!1}else if(f.value&&h.value&&k.value)return!1;return!0})),L=()=>{let a=E.outTabIdx;0==a?j.value=R(E.currContract,x({entryPrice:f,closePrice:y,count:h,leverage:Q,direction:s})):1==a?N.value=U(E.currContract,x({entryPrice:f,realisedRate:w,leverage:Q,direction:s})):J.value=D(E.currContract,x({entryPrice:f,count:h,balance:k,leverage:Q,positionMode:V,direction:s}))};return(e,l)=>{const t=S,C=T,x=_;return A(),o(u,null,[2==a.outTabIdx?(A(),o("div",O,[n("div",{class:"select",onClick:M},v(q[V.value].name),1)])):g("",!0),n("div",W,[(A(),o(u,null,c(p,((a,e)=>n("p",{class:r(""+(a.value==s.value?"active":"")),key:e,onClick:e=>{return l=a.value,void(s.value=l);var l}},v(a.label),11,$))),64))]),i(H,{stepNum:5,modelValue:Q.value,"onUpdate:modelValue":l[0]||(l[0]=a=>Q.value=a),max:E.currContract.leverage},null,8,["modelValue","max"]),n("div",Z,[n("p",z,v(b(m)("开仓价格")),1),n("div",aa,[i(t,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=a=>f.value=a),placeholder:"0"},null,8,["modelValue"]),n("div",ea,[n("span",null,v(a.currContract.quoteKey),1)])]),0==a.outTabIdx?(A(),o(u,{key:0},[n("p",la,v(b(m)("平仓价格")),1),n("div",ta,[i(t,{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=a=>y.value=a),placeholder:"0"},null,8,["modelValue"]),n("div",sa,[n("span",null,v(a.currContract.quoteKey),1)])])],64)):g("",!0),1==a.outTabIdx?(A(),o(u,{key:1},[n("p",Aa,v(b(m)("回报率")),1),n("div",oa,[i(t,{modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=a=>w.value=a),placeholder:"0"},null,8,["modelValue"]),na])],64)):g("",!0),0==a.outTabIdx||2==a.outTabIdx?(A(),o(u,{key:2},[n("p",ua,v(b(m)("成交数量")),1),n("div",ca,[i(t,{modelValue:h.value,"onUpdate:modelValue":l[4]||(l[4]=a=>h.value=a),placeholder:"0"},null,8,["modelValue"]),n("div",ra,[n("span",null,v(a.currContract.baseKey),1)])])],64)):g("",!0),2==a.outTabIdx?(A(),o(u,{key:3},[n("p",ia,v(b(m)("账户金额")),1),n("div",da,[i(t,{modelValue:k.value,"onUpdate:modelValue":l[5]||(l[5]=a=>k.value=a),placeholder:"0"},null,8,["modelValue"]),n("div",va,[n("span",null,v(a.currContract.settlementKey),1)])])],64)):g("",!0)]),n("div",ma,[n("div",pa,v(b(m)("计算结果")),1),n("ul",Ca,[0==a.outTabIdx?(A(),o(u,{key:0},[n("li",null,[n("p",null,[n("span",null,v(b(m)("起始保证金")),1),n("img",{class:"tips",onClick:l[6]||(l[6]=a=>{F("showTip")}),src:K})]),n("span",ga,v(j.value.margin)+" "+v(a.currContract.settlementKey),1)]),n("li",null,[n("span",null,v(b(m)("收益")),1),n("span",ba,v(j.value.profit)+" "+v(a.currContract.settlementKey),1)]),n("li",null,[n("span",null,v(b(m)("回报率")),1),n("span",Ba,v(b(B)(j.value.rate,2,!1)),1)])],64)):g("",!0),1==a.outTabIdx?(A(),o("li",Ia,[n("span",null,v(b(m)("目标价格")),1),n("span",xa,v(N.value)+" "+v(a.currContract.quoteKey),1)])):g("",!0),2==a.outTabIdx?(A(),o("li",Ea,[n("span",null,v(b(m)("强平参考价")),1),n("span",Qa,v(J.value)+" "+v(a.currContract.quoteKey),1)])):g("",!0)]),2==a.outTabIdx?(A(),o("p",Va,v(b(m)("强平价格的计算考虑了您现有的持仓，持有仓位的未实现盈亏和占用保证金将影响强平价格计算。")),1)):g("",!0),n("p",fa,v(b(m)("注：实际交易中因存在手续费和资金费率，可能导致计算结果与交易结果不完全一致。")),1)]),n("div",ya,[i(C,{type:"primary",block:"",disabled:P.value,onClick:L},{default:d((()=>[I(v(b(m)("计算")),1)])),_:1},8,["disabled"])]),i(x,{show:Y.value,"onUpdate:show":l[7]||(l[7]=a=>Y.value=a),actions:q,"cancel-text":"取消","close-on-click-action":"",onSelect:l[8]||(l[8]=(a,e)=>{V.value=e})},null,8,["show"])],64)}}},[["__scopeId","data-v-7a430a69"]]),ka={class:"head"},Ta={class:"content"},wa={class:"radioList"},_a=["onClick"],Sa=a({__name:"downPop",props:["contracts","contractCode"],emits:["close"],setup(a,{emit:l}){let t=e(!0);const s=a,m=l,p=a=>{m("close",a)},C=e(s.contractCode),B=e(""),I=a=>{B.value=a};return(a,e)=>{const l=N,m=V;return A(),E(m,{show:b(t),"onUpdate:show":e[1]||(e[1]=a=>Q(t)?t.value=a:t=a),position:"bottom",round:"",closeable:"",onClose:p},{default:d((()=>[n("div",ka,[n("span",null,v(a.$t("选择合约")),1),n("img",{class:"close",onClick:p,src:J})]),n("div",Ta,[i(l,{modelValue:B.value,"onUpdate:modelValue":e[0]||(e[0]=a=>B.value=a),placeholder:a.$t("搜索"),onSearch:I},null,8,["modelValue","placeholder"]),n("ul",wa,[(A(!0),o(u,null,c(s.contracts,((a,e)=>(A(),o(u,{key:e},[a.contractCode.indexOf(B.value)>-1?(A(),o("li",{key:0,class:r(" "+(C.value==a.contractCode?"active":"")),onClick:e=>(a=>{C.value=a.contractCode,p(a.contractCode)})(a)},v(a.keyCapital),11,_a)):g("",!0)],64)))),128))])])])),_:1},8,["show"])}}},[["__scopeId","data-v-2bb9e27d"]]),Ka={key:0,class:"mainWrap"},ja={class:"tipsDialog"},Ra={class:"head"},Ua={class:"tipContent"},Da=a({__name:"index",setup(a){const t=f();y();const{t:s}=C(),r=h(),m=e(t.query.contractCode),p=l((()=>r.contractInfoMap[m.value])),B=e(0),x=[s("收益"),s("目标价格"),s("强平价格")],Q=e(!1),V=()=>{Q.value=!0},_=a=>{a&&(m.value=a),Q.value=!1},S=e(!1),K=()=>{S.value=!0},j=()=>{S.value=!1};return(a,e)=>{const l=w,t=Y,C=F,f=T,y=k;return A(),o(u,null,[i(l,{headTt:b(s)("计算器")},null,8,["headTt"]),null!=p.value?(A(),o("div",Ka,[n("div",{class:"select1",onClick:V},v(p.value.keyCapital),1),i(C,{active:B.value,"onUpdate:active":e[0]||(e[0]=a=>B.value=a),shrink:""},{default:d((()=>[(A(),o(u,null,c(x,((a,e)=>i(t,{title:a,key:e},{default:d((()=>[i(ha,{outTabIdx:B.value,currContract:p.value,onShowTip:K},null,8,["outTabIdx","currContract"])])),_:2},1032,["title"]))),64))])),_:1},8,["active"])])):g("",!0),Q.value?(A(),E(Sa,{key:1,contractCode:m.value,contracts:b(r).contractInfoList(),onClose:_},null,8,["contractCode","contracts"])):g("",!0),i(y,{show:S.value,"onUpdate:show":e[1]||(e[1]=a=>S.value=a),showConfirmButton:!1},{default:d((()=>[n("div",ja,[n("div",Ra,[n("span",null,v(b(s)("初始保证金")),1)]),n("div",Ua,v(b(s)("起始保证金有时会小于下单所需的保证金。下单所需保证金=起始保证金+开仓亏损，其中开仓亏损考虑了盘口最新情况与标记价格之间的差异。")),1),n("div",null,[i(f,{type:"primary",block:"",onClick:j},{default:d((()=>[I(v(b(s)("确定")),1)])),_:1})])])])),_:1},8,["show"])],64)}}},[["__scopeId","data-v-5da9109b"]]);export{Da as default};
