import{_ as e,u as a,t as s,f as l,q as t,j as n,bO as i,by as o,o as u,c as r,b as d,C as c,m as p,l as v,z as m,n as h,F as g,B as f,G as y,N as w,O as _,a as C,M as k,E as x,P as b,bL as T,ao as j,S as U,r as $,s as A,bP as R,J as S,K as P}from"./index-ZSwLI674.js";/* empty css              *//* empty css              *//* empty css              */import{_ as D}from"./headItem-BRJ0w2uz.js";import{A as I}from"./index-3U2bf2de.js";import{L as N}from"./index-DIGiQeHE.js";import{B}from"./index-Cxe8Vk9V.js";import{c as L,_ as F}from"./circleItem-CPRU8Mr1.js";import{E as z}from"./emptyPage-DPXgX7yJ.js";import{P as V}from"./index-BjhfBHgw.js";import{_ as E}from"./icon_huazhuan_line_enter@2x-BBhcQ3fp.js";import{T as M,a as q}from"./index-C0sISGSw.js";import"./use-tab-status-yiZOeCkD.js";/* empty css                                                                   */import"./use-id-BUjKeJ2W.js";import"./index-DXU4Ikqf.js";import"./index-BpQst5nk.js";const H=e=>(S("data-v-b7785962"),e=e(),P(),e),O={class:"top"},G={class:"leftCol"},J=H((()=>d("img",{class:"chexiao",src:F},null,-1))),K=["onClick"],Z={class:"leftCol"},Q=H((()=>d("span",{class:"line"},"/",-1))),W={class:"mid"},X={class:"whiteF"},Y=H((()=>d("span",{class:"line"},"/",-1))),ee={class:"row"},ae={key:0,class:"value"},se={class:"white"},le={key:1,class:"value"},te={class:"white"},ne={class:"row"},ie={class:"value"},oe={class:"white"},ue={key:0,class:"row"},re={class:"value"},de={class:"white"},ce={class:"rightCol"},pe="global.public.platform@202",ve=e({__name:"currentList",setup(e){const{t:S}=a(),P=s();l(!1);const D=l(!1),F=()=>{D.value=!0},V=[{name:S("所有委托")},{name:S("卖出委托")},{name:S("买入委托")}];let E=l([]),M=l(0);const q=t(),H=l(1),ve=l(0),me=l(!1),he=l(!1),ge=async()=>{let e={};M.value>0&&(2==M.value?e.entrustType="B":e.entrustType="S");let{data:{list:a,total:s}}=await U.querySpotEntrusts($({pageNum:H,pageSize:10}),e);E.value=[].concat(...E.value,...a),ve.value=s,me.value=!1,H.value++,a.length<10&&(he.value=!0)},fe=async()=>{await U.cancelAllSpotEntrust({}),A(S("撤销全部发起成功"))},ye=e=>{R(E.value,e,null)};return n((()=>{q.isLogin()&&(ge(),i.on(pe,ye))})),o((()=>{i.off(pe,ye)})),(e,a)=>{const s=B,l=N,t=I;return u(),r(g,null,[d("div",O,[d("div",G,[d("div",{class:"select",onClick:F},c(V[p(M)].name),1)]),p(E).length>0?(u(),v(s,{key:0,size:"small",onClick:fe},{default:m((()=>[J,d("span",null,c(p(S)("撤销全部")),1)])),_:1})):h("",!0)]),p(E).length>0?(u(),v(l,{key:0,class:"list",loading:me.value,"onUpdate:loading":a[0]||(a[0]=e=>me.value=e),finished:he.value,"finished-text":p(S)("没有更多了"),onLoad:ge},{default:m((()=>[(u(!0),r(g,null,f(p(E),((e,a)=>(u(),r("li",{key:a,onClick:a=>p(P).push("/spot/entrust?orderNo="+e.orderNo)},[d("div",Z,[d("div",null,[d("div",{class:y("B"==e.entrustType?"greenTittle":"redTittle")},[d("span",null,c(p(w)(e.entrustMode)),1),Q,d("span",null,c(p(_)(e.entrustType)),1)],2),C(L,{rate:p(k)(e)},null,8,["rate"])]),d("div",W,[d("div",X,[x(c(e.leftCoin.toUpperCase())+" ",1),Y,x(" "+c(e.rightCoin.toUpperCase()),1)]),d("div",ee,[d("span",null,c(p(S)("数量")),1),"20"==e.entrustMode?(u(),r("p",ae,[d("span",se,c("B"==e.entrustType?e.rightAmountDeal:e.leftAmountDeal),1),d("span",null," / "+c("B"==e.entrustType?e.rightAmount:e.leftAmount),1)])):(u(),r("p",le,[d("span",te,c(e.leftAmountDeal),1),d("span",null," / "+c(e.leftAmount),1)]))]),d("div",ne,[d("span",null,c(p(S)("价格")),1),d("p",ie,[d("span",oe,c(e.entrustPrice||p(S)("市价")),1)])]),e.triggerPrice?(u(),r("div",ue,[d("span",null,c(p(S)("触发价")),1),d("p",re,[d("span",de,c(e.triggerPrice),1)])])):h("",!0)])]),d("div",ce,[d("div",null,c(p(b)(e.createTime)),1),"20"!=e.orderStatus?(u(),v(s,{key:0,size:"mini",onClick:T((a=>(async({orderNo:e})=>{await U.cancelSpotEntrust({orderNo:e}),A(S("撤单发起成功"))})(e)),["stop"])},{default:m((()=>[x(c(p(S)("撤单")),1)])),_:2},1032,["onClick"])):h("",!0)])],8,K)))),128))])),_:1},8,["loading","finished","finished-text"])):(u(),v(z,{key:1})),C(t,{show:D.value,"onUpdate:show":a[1]||(a[1]=e=>D.value=e),actions:V,"cancel-text":p(S)("取消"),"close-on-click-action":"",onSelect:a[2]||(a[2]=(e,a)=>{j(M)?M.value=a:M=a,H.value=1,j(E)?E.value=[]:E=[],ge()})},null,8,["show","cancel-text"])],64)}}},[["__scopeId","data-v-b7785962"]]),me=e=>(S("data-v-b86be0a9"),e=e(),P(),e),he={class:"top"},ge=["onClick"],fe={class:"itemRow"},ye={class:"whiteF"},we=me((()=>d("span",{class:"line"},"/",-1))),_e={class:"rightCol"},Ce={class:"time"},ke=me((()=>d("img",{src:E},null,-1))),xe={class:"itemRow"},be=me((()=>d("span",{class:"line"},"/",-1))),Te={key:0,class:"sign"},je={key:1,class:"sign signGreen"},Ue={class:"itemRow downrow"},$e={key:0,class:"value"},Ae={class:"white"},Re={key:1,class:"value"},Se={class:"white"},Pe={class:"itemRow downrow"},De={class:"value"},Ie={class:"white"},Ne=me((()=>d("span",{class:"line"},"/",-1))),Be={key:0,class:"itemRow downrow"},Le={class:"value"},Fe={class:"white"},ze=e({__name:"historyListToDo",setup(e){const a=s(),t=l(!1),i=()=>{t.value=!t.value,S()};let o=l([]);const k=l(1),T=l(0),j=l(!1),A=l(!1),R=l(!1),S=()=>{A.value=!1,j.value=!0,k.value=1,o.value=[],P()},P=async()=>{R.value&&(o.value=[],R.value=!1);let e={};t.value&&(e.isHiddenCancel=!0);let{data:{list:a,total:s}}=await U.querySpotHistorys($({pageNum:k,pageSize:10}),e);o.value=[].concat(...o.value,...a),T.value=s,j.value=!1,k.value++,a.length<10&&(A.value=!0)};return n((()=>{P()})),(e,s)=>{const l=N,n=V;return u(),r(g,null,[d("div",he,[d("span",{class:y("gou "+(t.value?"active":"")),onClick:i},null,2),d("span",null,c(e.$t("隐藏已撤销")),1)]),C(n,{modelValue:R.value,"onUpdate:modelValue":s[1]||(s[1]=e=>R.value=e),onRefresh:S},{default:m((()=>[p(o).length>0?(u(),v(l,{key:0,class:"list",loading:j.value,"onUpdate:loading":s[0]||(s[0]=e=>j.value=e),finished:A.value,"finished-text":e.$t("没有更多了"),onLoad:P},{default:m((()=>[(u(!0),r(g,null,f(p(o),((s,l)=>(u(),r("li",{key:l,onClick:e=>p(a).push("/spot/entrust?orderNo="+s.orderNo)},[d("div",fe,[d("div",ye,[x(c(s.leftCoin.toUpperCase())+" ",1),we,x(" "+c(s.rightCoin.toUpperCase()),1)]),d("div",_e,[d("span",Ce,c(p(b)(s.createTime)),1),ke])]),d("div",xe,[d("div",{class:y("B"==s.entrustType?"greenTittle":"redTittle")},[d("span",null,c(p(w)(s.entrustMode)),1),be,d("span",null,c(p(_)(s.entrustType)),1)],2),"21"==s.orderStatus?(u(),r("div",Te,c(e.$t("已撤销")),1)):h("",!0),"01"==s.orderStatus?(u(),r("div",je,c(e.$t("完全成交")),1)):h("",!0)]),d("div",Ue,[d("span",null,c(e.$t("数量")),1),"20"==s.entrustMode?(u(),r("p",$e,[d("span",Ae,c("B"==s.entrustType?s.leftAmountDeal:s.rightAmountDeal),1),d("span",null," / "+c("B"==s.entrustType?s.leftAmountDeal:s.rightAmountDeal),1)])):(u(),r("p",Re,[d("span",Se,c(s.leftAmountDeal),1),d("span",null," / "+c(s.leftAmount),1)]))]),d("div",Pe,[d("span",null,c(e.$t("价格")),1),d("p",De,[d("span",Ie,c(s.averagePrice),1),Ne,d("span",null,c(s.entrustPrice||e.$t("市价")),1)])]),s.triggerPrice?(u(),r("div",Be,[d("span",null,c(e.$t("触发价")),1),d("p",Le,[d("span",Fe,c(s.triggerPrice),1)])])):h("",!0)],8,ge)))),128))])),_:1},8,["loading","finished","finished-text"])):(u(),v(z,{key:1}))])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-b86be0a9"]]),Ve=e=>(S("data-v-70405137"),e=e(),P(),e),Ee={class:"itemRow"},Me={class:"whiteF"},qe=Ve((()=>d("span",{class:"line"},"/",-1))),He=Ve((()=>d("div",{class:"rightCol"},[d("span",{class:"time"}," 2021-11-01 14:45:01 ")],-1))),Oe={class:"itemRow"},Ge={key:0,class:"greenTittle"},Je={key:1,class:"redTittle"},Ke={class:"itemRow downrow",style:{"margin-top":"5px"}},Ze={class:"value"},Qe={class:"white"},We={class:"itemRow downrow"},Xe={class:"value"},Ye={class:"white"},ea={class:"itemRow downrow"},aa={class:"value"},sa={class:"white"},la={class:"itemRow downrow"},ta={class:"value"},na={class:"white"},ia=e({__name:"historyListDone",setup(e){s();let a=l([]);const i=l(1),o=l(0),h=l(!1),y=l(!1),w=t(),_=l(!1),C=()=>{y.value=!1,h.value=!0,_.value=!1,i.value=1,a.value=[],k()},k=async()=>{let{data:{list:e,total:s}}=await U.querySpotTrades($({pageNum:i,pageSize:10}),{});a.value=[].concat(...a.value,...e),o.value=s,h.value=!1,i.value++,e.length<10&&(y.value=!0)};return n((()=>{k()})),(e,s)=>{const l=N,t=V;return u(),v(t,{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=e=>_.value=e),onRefresh:C},{default:m((()=>[p(a).length>0?(u(),v(l,{key:0,class:"list",loading:h.value,"onUpdate:loading":s[0]||(s[0]=e=>h.value=e),finished:y.value,"finished-text":e.$t("没有更多了"),onLoad:k},{default:m((()=>[(u(!0),r(g,null,f(p(a),((a,s)=>(u(),r("li",{key:s},[d("div",Ee,[d("div",Me,[x(c(a.leftCoin.toUpperCase())+" ",1),qe,x(" "+c(a.rightCoin.toUpperCase()),1)]),He]),d("div",Oe,[p(w).mid==a.buyerId?(u(),r("div",Ge,[d("span",null,c(e.$t("买入")),1)])):(u(),r("div",Je,[d("span",null,c(e.$t("卖出")),1)]))]),d("div",Ke,[d("span",null,c(e.$t("价格"))+"("+c(a.rightCoin.toUpperCase())+") ",1),d("p",Ze,[d("span",Qe,c(a.dealPrice),1)])]),d("div",We,[d("span",null,c(e.$t("成交数量"))+"("+c(a.leftCoin.toUpperCase())+") ",1),d("p",Xe,[d("span",Ye,c(a.leftAmount),1)])]),d("div",ea,[d("span",null,c(e.$t("手续费"))+"("+c(p(w).mid==a.buyerId?a.buyerFeeCoin.toUpperCase():a.sellerFeeCoin.toUpperCase())+") ",1),d("p",aa,[d("span",sa,c(p(w).mid==a.buyerId?a.buyerFee:a.sellerFee),1)])]),d("div",la,[d("span",null,c(e.$t("总量"))+" ("+c(a.rightCoin.toUpperCase())+") ",1),d("p",ta,[d("span",na,c(a.rightAmount),1)])])])))),128))])),_:1},8,["loading","finished","finished-text"])):(u(),v(z,{key:1}))])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-70405137"]]),oa=e({__name:"index",setup(e){const a=l(0);return(e,s)=>{const l=D,t=q,n=M;return u(),r(g,null,[C(l,{headTt:e.$t("现货")},null,8,["headTt"]),C(n,{active:a.value,"onUpdate:active":s[0]||(s[0]=e=>a.value=e)},{default:m((()=>[C(t,{title:e.$t("当前委托"),key:"tab1"},{default:m((()=>[C(ve)])),_:1},8,["title"]),C(t,{title:e.$t("历史委托"),key:"tab2"},{default:m((()=>[C(ze)])),_:1},8,["title"]),C(t,{title:e.$t("成交历史"),key:"tab3"},{default:m((()=>[C(ia)])),_:1},8,["title"])])),_:1},8,["active"])],64)}}},[["__scopeId","data-v-967688da"]]);export{oa as default};
