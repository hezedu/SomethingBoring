import{x as e,t as a,f as s,u as l,r as o,q as r,h as i,w as n,j as t,U as d,o as p,c as m,a as u,m as c,b as f,C as w,p as y,l as v}from"./index-CioBjTVG.js";import{_ as g}from"./headItem-Cz9qCjk4.js";import{_ as b}from"./index-p6Lr4oSA.js";import{A as x,B as _}from"./bizType-DS6j0Y_R.js";import"./index-h3qOpuro.js";import"./index-C9iF-GfQ.js";import"./use-id-CcbAo3SX.js";/* empty css                                              */import"./index-CaK62ptd.js";const h={key:0,class:"authority-set-pwd-wrapper"},P={class:"tip-text"},T={class:"set-pwd-content"},j={__name:"changePwd",setup(j){e();const V=a(),k=s(!1),{t:D}=l(),I=s(null),M=o({bizType:_.EDIT_PWD,email:"",ga:"",phone:"",verifyEmail:!1,verifyGa:!1,verifyPhone:!1}),q=r(),A=i((()=>null==q.userInfo?null:q.userInfo.security)),C=()=>{V.push({name:"userCenterSecure"})},F=async({result:e})=>{await d.modifyPassword({pwdType:"LOGIN",...e,...z.formModelValues}),q.toLogin()},z=o({formModelValues:{},submitText:D("提交"),submitDisabled:k,onSubmit:e=>{console.log(e),M.verifyGa=A.value.googleCode,I.value={bizType:_.EDIT_PWD,ext:{...M}}},formConfigList:[{componentType:"password",type:"password",key:"oldPassword",label:D("旧密码"),labelAlign:"top",placeholder:D("请输入原密码"),vanFieldclass:"van-field-item-wrapper",rules:[{required:!0,message:D("请输入原密码")}]},{componentType:"password",type:"password",key:"newPassword",label:D("新密码"),labelAlign:"top",placeholder:D("请输入新密码"),vanFieldclass:"van-field-item-wrapper",rules:[{required:!0,message:D("请输入新密码")}]},{componentType:"password",type:"password",label:D("新密码"),labelAlign:"top",key:"confirmPassword",placeholder:D("请再次输入新密码"),vanFieldclass:"van-field-item-wrapper",rules:[{required:!0,message:D("请再次输入新密码")}]}]});return n((()=>z.formModelValues),(e=>{console.log("newFormData",e),(e=>{k.value=!(e.newPassword&&e.confirmPassword)})(e)}),{immediate:!0,deep:!0}),t((async()=>{d.getUserInfo()})),(e,a)=>null==I.value?(p(),m("div",h,[u(g,{headTt:c(D)("修改密码"),goBack:C},null,8,["headTt"]),f("span",P,"*"+w(c(D)("为了您的账户安全"))+"，"+w(c(D)("更改安全项目后"))+"，"+w(c(D)("24小时内不可提现")),1),f("div",T,[u(b,y({modelValue:z.formModelValues,"onUpdate:modelValue":a[0]||(a[0]=e=>z.formModelValues=e)},z),null,16,["modelValue"])])])):(p(),v(x,{key:1,twiceParams:I.value,onNext:F,onBack:a[1]||(a[1]=e=>I.value=null)},null,8,["twiceParams"]))}};export{j as default};
